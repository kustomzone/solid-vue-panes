(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c700d8e0"],{"60b0":function(e,t,n){"use strict";var i=n("c976"),o=n.n(i);o.a},a434:function(e,t,n){"use strict";var i=n("23e7"),o=n("23cb"),r=n("a691"),a=n("50c4"),d=n("7b0b"),l=n("65f0"),s=n("8418"),c=n("1dde"),u=n("ae40"),f=c("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,h=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var n,i,c,u,f,p,v=d(this),w=a(v.length),k=o(e,w),E=arguments.length;if(0===E?n=i=0:1===E?(n=0,i=w-k):(n=E-2,i=h(b(r(t),0),w-k)),w+n-i>m)throw TypeError(g);for(c=l(v,i),u=0;u<i;u++)f=k+u,f in v&&s(c,u,v[f]);if(c.length=i,n<i){for(u=k;u<w-i;u++)f=u+i,p=u+n,f in v?v[p]=v[f]:delete v[p];for(u=w;u>w-i+n;u--)delete v[u-1]}else if(n>i)for(u=w-i;u>k;u--)f=u+i-1,p=u+n-1,f in v?v[p]=v[f]:delete v[p];for(u=0;u<n;u++)v[u+k]=arguments[u+2];return v.length=w-i+n,c}})},b803:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modele-view"},[e._v(" EditorNetwork "+e._s(e.file.url)),n("br"),e._v(" TITLE : "+e._s(e.node.label)),n("br"),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.node-popup",modifiers:{"node-popup":!0}}]},[e._v("Launch demo modal")]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.edge-popup",modifiers:{"edge-popup":!0}}]},[e._v("Launch demo modal")]),n("b-button",{on:{click:e.clear}},[e._v("Clear")]),n("b-input",{model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}}),n("b-button",{on:{click:e.create}},[e._v("New")]),n("network",{ref:"network",attrs:{nodes:e.nodes,edges:e.edges,options:e.options}}),n("NodeModal",{on:{ok:e.saveNode},model:{value:e.node,callback:function(t){e.node=t},expression:"node"}}),n("EdgeModal",{on:{ok:e.saveEdge},model:{value:e.edge,callback:function(t){e.edge=t},expression:"edge"}})],1)},o=[],r=(n("4de4"),n("4160"),n("c975"),n("a15b"),n("d81d"),n("a434"),n("b0c0"),n("d3b7"),n("ac1f"),n("8a79"),n("1276"),n("159b"),n("53ca")),a=(n("96cf"),n("1da1")),d=n("4d8d"),l=n("6dc1"),s=(n("38b4"),n("234f")),c={name:"EditorNetwork",mixins:[s["a"]],components:{NodeModal:function(){return n.e("chunk-fad8e306").then(n.bind(null,"b7ab"))},EdgeModal:function(){return n.e("chunk-4e25104e").then(n.bind(null,"4e1d"))}},data:function(){return{filename:"",tmp_file:null,triples:[],node:{},edge:{},nodes:[{id:1,label:"circle",shape:"circle"},{id:2,label:"ellipse",shape:"ellipse"},{id:3,label:"database",shape:"database"},{id:4,label:"box",shape:"box"},{id:5,label:"diamond",shape:"diamond"},{id:6,label:"dot",shape:"dot"},{id:7,label:"square",shape:"square"},{id:8,label:"triangle",shape:"triangle"}],edges:[{from:1,to:2},{from:2,to:3},{from:2,to:4},{from:2,to:5},{from:5,to:6},{from:5,to:7},{from:6,to:8}],options:{nodes:{borderWidth:4},edges:{color:"lightgray"},manipulation:{enabled:!0,initiallyActive:!0,addNode:!0,addEdge:!0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{}}}}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.file=e.$store.state.solid.file;case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{saveNode:function(e){var t=this.nodes.map((function(e){return e.id})).indexOf(e.id);t>-1?(this.nodes.splice(t,1),this.nodes[t].label=e.label):this.nodes.push(e)},writeEdgeToFile:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,o,r,a,s,c,u,f,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return null!=t.tmp_file&&(t.file=t.tmp_file),i=t.nodes.filter((function(t){return t.id==e.from})),o=t.nodes.filter((function(t){return t.id==e.to})),r=i[0].id.split("#")[1],a=o[0].id.split("#")[1],s=new Date,c=s.toISOString(),n.next=9,Object(d["b"])(t.file.url);case 9:u=n.sent,f=u.addSubject({identifier:r}),f.addString(l["e"].label,i[0].label),f.addString(l["a"].modified,c),f.addRef(l["b"].maker,t.webId),f.addRef(t.file.url+"#"+e.label,o[0].id),p=u.addSubject({identifier:a}),p.addString(l["e"].label,o[0].label),u.save();case 18:case"end":return n.stop()}}),n)})))()},saveEdge:function(e){var t=this.edges.map((function(e){return e.id})).indexOf(e.id);t>-1?this.edges[t].label=e.label:(this.edges.push(e),this.writeEdgeToFile(e))},create:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,i,o,r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clear(),e.tmp_file={},e.filename=e.filename.split(" ").join("_"),e.tmp_file.name=e.filename.endsWith(".ttl")?e.filename:e.filename+".ttl",e.tmp_file.url=e.folder.url+e.tmp_file.name,n={id:e.tmp_file.url+"#this",label:"#this"},e.nodes.push(n),i={},o=!1,t.prev=9,t.next=12,Object(d["b"])(e.tmp_file.url);case 12:i=t.sent,o=!0,t.next=22;break;case 16:return t.prev=16,t.t0=t["catch"](9),t.next=20,Object(d["a"])(e.tmp_file.url);case 20:i=t.sent,o=!1;case 22:r=new Date,a=r.toISOString(),s=i.addSubject({identifier:"this"}),0==o?(s.addString(l["e"].label,n.label),s.addString(l["a"].created,a),console.log("file created",e.tmp_file.url)):(s.addString(l["a"].modified,a),console.log("file modified",e.tmp_file.url)),s.addRef(l["b"].maker,e.webId),i.save();case 28:case"end":return t.stop()}}),t,null,[[9,16]])})))()},clear:function(){this.nodes=[],this.edges=[]},update:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.triples=[],void 0==e.file.url||!e.file.url.endsWith(".ttl")&&!e.file.url.endsWith("card")){t.next=8;break}return t.next=4,Object(d["b"])(e.file.url);case 4:n=t.sent,e.triples=n.getTriples(),t.next=8;break;case 8:case"end":return t.stop()}}),t)})))()},networkEvent:function(e){console.log(e)},addInterests:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,solid.data[e].storage;case 2:return i=n.sent,o=i+"public/popock/profile.ttl",n.prev=4,n.next=7,Object(d["b"])(o);case 7:return t.profileDoc=n.sent,n.next=10,t.profileDoc.getSubject(o+"#me");case 10:return r=n.sent,n.next=13,r.getAllLiterals(l["b"].topic_interest);case 13:t.interests=n.sent,t.interests.forEach((function(n){t.$refs.network.nodes.push({id:n,label:n,shape:"triangle",color:"green"}),t.$refs.network.edges.push({from:e,to:n,label:"foaf:topic_interest"})})),n.next=19;break;case 17:n.prev=17,n.t0=n["catch"](4);case 19:case"end":return n.stop()}}),n,null,[[4,17]])})))()},addTriplet:function(e){var t=this.colorize(e.subject.id),n=this.lastPart(e.subject.id),i={id:e.subject.id,label:n,shape:"star",color:"rgba("+t.red+", "+t.green+", "+t.blue+",0.5)"};this.addOrNothingNode(i);var o=this.colorize(e.object.id),r=this.lastPart(e.object.id),a={id:e.object.id,label:r,shape:"box",color:"rgba("+o.red+", "+o.green+", "+o.blue+",0.5)"};this.addOrNothingNode(a);var d=this.lastPart(e.predicate.id),l={from:i.id,to:a.id,label:d};this.edges.push(l)},editNode:function(e){this.node=e,this.$bvModal.show("node-popup")},addEdge:function(e,t){if(this.edge=e,e.from==e.to){var n=confirm("Do you want to connect the node to itself?");if(1!=n)return void t(null)}this.editEdgeWithoutDrag(e,t)},editEdge:function(e,t){this.editEdgeWithoutDrag(e,t)},editEdgeWithoutDrag:function(e,t){this.edge=e,this.$bvModal.show("edge-popup"),t()},clearNodePopUp:function(){document.getElementById("node-saveButton").onclick=null,document.getElementById("node-cancelButton").onclick=null,document.getElementById("node-popUp").style.display="none"},cancelNodeEdit:function(e){this.clearNodePopUp(),e(null)},saveNodeData:function(e,t){e.label=document.getElementById("node-label").value,this.clearNodePopUp(),t(e)},clearEdgePopUp:function(){document.getElementById("edge-saveButton").onclick=null,document.getElementById("edge-cancelButton").onclick=null,document.getElementById("edge-popUp").style.display="none"},cancelEdgeEdit:function(e){this.clearEdgePopUp(),e(null)},saveEdgeData:function(e,t){"object"===Object(r["a"])(e.to)&&(e.to=e.to.id),"object"===Object(r["a"])(e.from)&&(e.from=e.from.id),e.label=document.getElementById("edge-label").value,this.clearEdgePopUp(),t(e)}},watch:{node:function(){},file:function(){this.update()},friends:function(e){var t=this;e.forEach((function(e){t.$refs.network.nodes.push({id:e,label:e,shape:"dot",color:"yellow"}),t.$refs.network.edges.push({from:t.webId,to:e,label:"foaf:friend"}),t.addInterests(e)}))},webId:function(e){this.$refs.network.nodes.push({id:e,label:e}),this.addInterests(e)},triples:function(){var e=this;this.triples.length>0&&this.triples.forEach((function(t){e.addTriplet(t)}))}},computed:{folder:function(){return this.$store.state.solid.folder},profile_url:{get:function(){return this.$store.state.solid.storage+"public/popock/profile.ttl"},set:function(){}},storage:{get:function(){return this.$store.state.solid.storage},set:function(){}},webId:{get:function(){return this.$store.state.solid.webId},set:function(){}},friends:{get:function(){return this.$store.state.solid.friends},set:function(){}},file:{get:function(){return this.$store.state.solid.file},set:function(e){return this.$store.commit("solid/setFile",e)}}}},u=c,f=(n("60b0"),n("2877")),p=Object(f["a"])(u,i,o,!1,null,null,null);t["default"]=p.exports},c976:function(e,t,n){},d81d:function(e,t,n){"use strict";var i=n("23e7"),o=n("b727").map,r=n("1dde"),a=n("ae40"),d=r("map"),l=a("map");i({target:"Array",proto:!0,forced:!d||!l},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-c700d8e0.9271ea78.js.map