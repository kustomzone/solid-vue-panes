(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b5bef7c"],{"1dde":function(e,t,r){var n=r("d039"),s=r("b622"),a=r("2d00"),o=s("species");e.exports=function(e){return a>=51||!n((function(){var t=[],r=t.constructor={};return r[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"4de4":function(e,t,r){"use strict";var n=r("23e7"),s=r("b727").filter,a=r("1dde"),o=r("ae40"),i=a("filter"),c=o("filter");n({target:"Array",proto:!0,forced:!i||!c},{filter:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},8418:function(e,t,r){"use strict";var n=r("c04e"),s=r("9bf2"),a=r("5c6c");e.exports=function(e,t,r){var o=n(t);o in e?s.f(e,o,a(0,r)):e[o]=r}},a15b:function(e,t,r){"use strict";var n=r("23e7"),s=r("44ad"),a=r("fc6a"),o=r("a640"),i=[].join,c=s!=Object,l=o("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(e){return i.call(a(this),void 0===e?",":e)}})},baa5:function(e,t,r){var n=r("23e7"),s=r("e58c");n({target:"Array",proto:!0,forced:s!==[].lastIndexOf},{lastIndexOf:s})},c3f8:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"solid-chat-list"},[r("b-input-group",{staticClass:"mb-2"},[r("b-form-datepicker",{attrs:{id:"example-datepicker",min:"2020-08-01",max:e.max},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),r("b-input-group-append",[r("b-button",{on:{click:e.sort}},[e._v("Sort")])],1)],1),r("b-list-group",e._l(e.messages,(function(t){return r("b-list-group-item",{key:t.id,staticClass:"flex-column align-items-start"},[r("div",{staticClass:"d-flex w-100 justify-content-between"},[r("div",{staticClass:"mb-1"},[null!=t.maker?r("a",{attrs:{href:t.maker,target:"_blank"}},[r("b-icon",{attrs:{icon:"person-fill"}}),e._v(e._s(t.maker.split("/").slice(2,3)[0])+" ")],1):r("b-icon",{attrs:{icon:"person-fill"}})],1),r("small",{staticClass:"text-muted"},[e._v(" "+e._s(t.created)+" ")])]),r("p",{staticClass:"mb-1"},[e._v(" "+e._s(t.content)+" ")]),r("div",{staticClass:"text-muted"},[t.parent?r("div",[e._v(" This "),r("a",{attrs:{href:t.id.split("#")[0],target:"_blank"}},[e._v(e._s(t.id.split("/").slice(-2,-1)[0]))]),e._v(" channel as been created from "),r("b-button",{staticClass:"m-1 btn-sm",attrs:{pill:!0,variant:"outline-info"},on:{click:function(r){return e.bascule(t.parent)}}},[e._v(" "+e._s(t.parent.split("/").slice(-2,-1)[0])+" ")])],1):e._e(),null!=e.webId?r("b-button",{staticClass:"btn-sm",attrs:{pill:!0,variant:"outline-info"},on:{click:function(r){return e.new_sub(t.id)}}},[e._v("Reply")]):r("span",[e._v("Login to reply")]),e._l(t.parts,(function(t){return r("b-button",{key:t,staticClass:"m-1 btn-sm",attrs:{pill:!0,variant:"info"},on:{click:function(r){return e.bascule(t)}}},[e._v(" "+e._s(t.split("/").slice(-2,-1)[0])+" ")])}))],2)])})),1),r("div",[e.messages.length>5?r("b-input-group",{staticClass:"mb-2"},[r("b-form-datepicker",{attrs:{id:"example-datepicker2",min:"2020-08-01",max:e.max},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),r("b-input-group-append",[r("b-button",{on:{click:e.sort}},[e._v("Sort")])],1)],1):e._e()],1),r("br"),r("br"),r("div",{staticClass:"m-3"},[r("a",{attrs:{href:"https://scenaristeur.github.io/spoggy-simple/?source="+e.file,target:"_blank"}},[e._v("Visualization")])]),r("br"),r("br"),r("br")],1)},s=[],a=(r("a15b"),r("baa5"),r("fb6a"),r("ac1f"),r("1276"),r("96cf"),r("1da1")),o={created:function(){},methods:{createWebSocket:function(){var e=this.$store.state.parle.root,t=e.split("//")[1],r=t.split("/")[0]+"/",n=new WebSocket("wss://"+r,["solid.0.1.0"]);this.$store.commit("websocket/setSocket",n)},addSubscription:function(e){this.$store.state.websocket.socket.send("sub "+e)}}},i=(r("4de4"),r("4160"),r("c975"),r("159b"),r("00e8")),c=r.n(i),l=r("4d8d"),u=r("6dc1"),d={created:function(){this.fc=new SolidFileClient(c.a)},methods:{prepareToday:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new Date,e.$store.commit("parle/setDataDate",r),n=[r.getFullYear(),("0"+(r.getMonth()+1)).slice(-2),("0"+r.getDate()).slice(-2)].join("-")+".ttl",s=e.$store.state.parle.root+n,console.log(s),t.next=7,e.create(s);case 7:e.$store.commit("parle/setFileUrl",s);case 8:case"end":return t.stop()}}),t)})))()},create:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.fc.itemExists(e);case 2:if(r.sent){r.next=7;break}return r.next=5,t.fc.postFile(e,"","text/turtle").then((function(e){console.log("File Created",e)})).catch((function(e){return console.error("Error: ".concat(e))}));case 5:r.next=8;break;case 7:console.log("File exist",e);case 8:case"end":return r.stop()}}),r)})))()},getMessages:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,s,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=[],r.next=3,t.fc.itemExists(e);case 3:if(r.sent){r.next=8;break}return r.next=6,t.fc.postFile(e,"","text/turtle").then((function(e){console.log("File Created",e)})).catch((function(e){return console.error("Error: ".concat(e))}));case 6:r.next=9;break;case 8:console.log("File exist",e);case 9:return void 0!=t.$store.state.websocket.socket&&t.$store.state.websocket.socket.send("sub "+e),r.next=12,Object(l["b"])(e);case 12:s=r.sent,a=s.findSubjects(),a=a.filter(t.onlyUnique),o=[],a.forEach((function(e){var t=e.getString(u["a"].created),r=e.getLiteral(u["g"].content),n=e.getNodeRef(u["b"].maker),s=e.getAllNodeRefs(u["f"].hasPart),a=e.getNodeRef(u["f"].isPartOf),i={id:e.asRef(),created:new Date(t).toLocaleTimeString(),content:r,maker:n,parts:s,parent:a};o.push(i)})),n=o.reverse(),console.log("Messages",n),t.$store.commit("parle/setMessages",n);case 20:case"end":return r.stop()}}),r)})))()},onlyUnique:function(e,t,r){return r.indexOf(e)===t}}},f={name:"ParleList",props:{msg:String},mixins:[d,o],data:function(){return{date:"",part:""}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new Date,e.date=e.formatDate(r),e.max=e.date,e.path=e.$store.state.parle.root,console.log("ROOT FROM STORE",e.$store.state.parle.root),t.next=7,e.createWebSocket();case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.$store.state.websocket.socket,console.log("SOCKET FROM STORE",r),r.onmessage=function(e){e.data&&"pub"===e.data.slice(0,3)&&(console.log("updated",e.data),this.getMessages(e.data.substring(4)))}.bind(e);case 3:case"end":return t.stop()}}),t)})))()},methods:{bascule:function(e){console.log("Part",e),this.$store.commit("parle/setFileUrl",e),this.path=e.substr(0,e.lastIndexOf("/")+1),console.log(this.path),void 0!=this.$store.state.websocket.socket&&this.$store.state.websocket.socket.send("sub "+e),this.makeToast("We have switched to",e,"info"),this.getMessages(e)},sort:function(){this.messages.reverse()},formatDate:function(e){return[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-")},new_sub:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,s,a,o,i,c,d,f,b,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(e),n=prompt("Create a sub-channel from "+e),!(null!=n&&n.length>0)){r.next=42;break}return console.log(n),n=n.split(" ").join("_"),s=e.substr(0,e.lastIndexOf("/")+1),a=e.split("#").pop(),console.log("Parent",s,a),o=s+n+"/",i=t.date+".ttl",c=o+i,console.log("Child",o,i),t.$store.commit("parle/setFileUrl",c),void 0!=t.$store.state.websocket.socket&&t.$store.state.websocket.socket.send("sub "+c),r.next=16,t.fc.itemExists(c);case 16:if(r.sent){r.next=21;break}return r.next=19,t.fc.postFile(c,"","text/turtle").then((function(e){console.log("File Created",e)})).catch((function(e){return console.error("Error: ".concat(e))}));case 19:r.next=22;break;case 21:console.log("File exist",c);case 22:return r.next=24,Object(l["b"])(c);case 24:return d=r.sent,d.addSubject,f=d.addSubject({identifier:"this"}),f.addLiteral(u["a"].created,t.date),f.addNodeRef(u["f"].isPartOf,e),f.addNodeRef(u["b"].maker,t.$store.state.solid.webId),r.next=32,d.save();case 32:return r.next=34,Object(l["b"])(e);case 34:return b=r.sent,p=b.getSubject(e),p.addRef(u["f"].hasPart,c),r.next=39,b.save();case 39:t.bascule(c),r.next=43;break;case 42:alert("You must provide a name to create a sub Channel");case 43:case"end":return r.stop()}}),r)})))()},makeToast:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(t,{title:e,variant:r,solid:!0})}},computed:{file:function(){var e=this.path+this.date+".ttl";return this.$store.commit("parle/setFileUrl",e),void 0!=this.$store.state.websocket.socket&&1==this.$store.state.websocket.socket.readyState&&this.$store.state.websocket.socket.send("sub "+e),this.getMessages(e),e},webId:function(){return this.$store.state.solid.webId},messages:function(){return this.$store.state.parle.messages}}},b=f,p=r("2877"),m=Object(p["a"])(b,n,s,!1,null,null,null);t["default"]=m.exports},c975:function(e,t,r){"use strict";var n=r("23e7"),s=r("4d64").indexOf,a=r("a640"),o=r("ae40"),i=[].indexOf,c=!!i&&1/[1].indexOf(1,-0)<0,l=a("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(e){return c?i.apply(this,arguments)||0:s(this,e,arguments.length>1?arguments[1]:void 0)}})},e58c:function(e,t,r){"use strict";var n=r("fc6a"),s=r("a691"),a=r("50c4"),o=r("a640"),i=r("ae40"),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),f=i("indexOf",{ACCESSORS:!0,1:0}),b=u||!d||!f;e.exports=b?function(e){if(u)return l.apply(this,arguments)||0;var t=n(this),r=a(t.length),o=r-1;for(arguments.length>1&&(o=c(o,s(arguments[1]))),o<0&&(o=r+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:l},fb6a:function(e,t,r){"use strict";var n=r("23e7"),s=r("861d"),a=r("e8b5"),o=r("23cb"),i=r("50c4"),c=r("fc6a"),l=r("8418"),u=r("b622"),d=r("1dde"),f=r("ae40"),b=d("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),m=u("species"),h=[].slice,g=Math.max;n({target:"Array",proto:!0,forced:!b||!p},{slice:function(e,t){var r,n,u,d=c(this),f=i(d.length),b=o(e,f),p=o(void 0===t?f:t,f);if(a(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?s(r)&&(r=r[m],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return h.call(d,b,p);for(n=new(void 0===r?Array:r)(g(p-b,0)),u=0;b<p;b++,u++)b in d&&l(n,u,d[b]);return n.length=u,n}})}}]);
//# sourceMappingURL=chunk-4b5bef7c.8479825b.js.map