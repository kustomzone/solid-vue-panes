(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94f9418a"],{"4de4":function(e,t,s){"use strict";var r=s("23e7"),n=s("b727").filter,a=s("1dde"),o=s("ae40"),i=a("filter"),c=o("filter");r({target:"Array",proto:!0,forced:!i||!c},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},baa5:function(e,t,s){var r=s("23e7"),n=s("e58c");r({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},c3f8:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"solid-chat-list"},[e._v(' "" '+e._s(e.url)+" yy "),s("b-input-group",{staticClass:"mb-2"},[s("b-form-datepicker",{attrs:{id:"example-datepicker",min:"2020-08-01",max:e.max},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),s("b-input-group-append",[s("b-button",{on:{click:e.sort}},[e._v("Sort")])],1)],1),s("b-list-group",e._l(e.messages,(function(t){return s("b-list-group-item",{key:t.id,staticClass:"flex-column align-items-start"},[s("div",{staticClass:"d-flex w-100 justify-content-between"},[s("div",{staticClass:"mb-1"},[null!=t.maker?s("a",{attrs:{href:t.maker,target:"_blank"}},[s("b-icon",{attrs:{icon:"person-fill"}}),e._v(e._s(t.maker.split("/").slice(2,3)[0])+" ")],1):s("b-icon",{attrs:{icon:"person-fill"}})],1),s("small",{staticClass:"text-muted"},[e._v(" "+e._s(t.created)+" ")])]),s("p",{staticClass:"mb-1"},[e._v(" "+e._s(t.content)+" ")]),s("div",{staticClass:"text-muted"},[t.parent?s("div",[e._v(" This "),s("a",{attrs:{href:t.id.split("#")[0],target:"_blank"}},[e._v(e._s(t.id.split("/").slice(-2,-1)[0]))]),e._v(" channel as been created from "),s("b-button",{staticClass:"m-1 btn-sm",attrs:{pill:!0,variant:"outline-info"},on:{click:function(s){return e.bascule(t.parent)}}},[e._v(" "+e._s(t.parent.split("/").slice(-2,-1)[0])+" ")])],1):e._e(),null!=e.webId?s("b-button",{staticClass:"btn-sm",attrs:{pill:!0,variant:"outline-info"},on:{click:function(s){return e.new_sub(t.id)}}},[e._v("Reply")]):s("span",[e._v("Login to reply")]),e._l(t.parts,(function(t){return s("b-button",{key:t,staticClass:"m-1 btn-sm",attrs:{pill:!0,variant:"info"},on:{click:function(s){return e.bascule(t)}}},[e._v(" "+e._s(t.split("/").slice(-2,-1)[0])+" ")])}))],2)])})),1),s("div",[e.messages.length>5?s("b-input-group",{staticClass:"mb-2"},[s("b-form-datepicker",{attrs:{id:"example-datepicker2",min:"2020-08-01",max:e.max},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),s("b-input-group-append",[s("b-button",{on:{click:e.sort}},[e._v("Sort")])],1)],1):e._e()],1),s("br"),s("br"),s("div",{staticClass:"m-3"},[s("a",{attrs:{href:"https://scenaristeur.github.io/spoggy-simple/?source="+e.file,target:"_blank"}},[e._v("Visualization")])]),s("br"),s("br"),s("br")],1)},n=[],a=(s("a15b"),s("baa5"),s("fb6a"),s("ac1f"),s("1276"),s("96cf"),s("1da1")),o=(s("4de4"),s("4160"),s("c975"),s("159b"),s("00e8")),i=s.n(o),c=s("4d8d"),l=s("6dc1"),u={created:function(){this.fc=new SolidFileClient(i.a)},methods:{prepareToday:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new Date,e.$store.commit("parle/setDataDate",s),r=[s.getFullYear(),("0"+(s.getMonth()+1)).slice(-2),("0"+s.getDate()).slice(-2)].join("-")+".ttl",n=e.$store.state.parle.root+r,console.log(n),t.next=7,e.create(n);case 7:e.$store.commit("parle/setFileUrl",n);case 8:case"end":return t.stop()}}),t)})))()},create:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.fc.itemExists(e);case 2:if(s.sent){s.next=7;break}return s.next=5,t.fc.postFile(e,"","text/turtle").then((function(e){console.log("File Created",e)})).catch((function(e){return console.error("Error: ".concat(e))}));case 5:s.next=8;break;case 7:console.log("File exist",e);case 8:case"end":return s.stop()}}),s)})))()},getMessages:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var r,n,a,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=[],s.next=3,t.fc.itemExists(e);case 3:if(s.sent){s.next=8;break}return s.next=6,t.fc.postFile(e,"","text/turtle").then((function(e){console.log("File Created",e)})).catch((function(e){return console.error("Error: ".concat(e))}));case 6:s.next=9;break;case 8:console.log("File exist",e);case 9:return void 0!=t.$store.state.websocket.socket&&t.$store.state.websocket.socket.send("sub "+e),s.next=12,Object(c["b"])(e);case 12:n=s.sent,a=n.findSubjects(),a=a.filter(t.onlyUnique),o=[],a.forEach((function(e){var t=e.getString(l["a"].created),s=e.getLiteral(l["g"].content),r=e.getNodeRef(l["b"].maker),n=e.getAllNodeRefs(l["f"].hasPart),a=e.getNodeRef(l["f"].isPartOf),i={id:e.asRef(),created:new Date(t).toLocaleTimeString(),content:s,maker:r,parts:n,parent:a};o.push(i)})),r=o.reverse(),console.log("Messages",r),t.$store.commit("parle/setMessages",r);case 20:case"end":return s.stop()}}),s)})))()},onlyUnique:function(e,t,s){return s.indexOf(e)===t}}},d={name:"ParleList",props:{msg:String},mixins:[u],data:function(){return{date:"",part:""}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new Date,e.date=e.formatDate(s),e.max=e.date,e.path=e.$store.state.parle.root,console.log("ROOT FROM STORE",e.$store.state.parle.root),t.next=7,e.createWebSocket();case 7:e.url=e.$store.state.parle.url,void 0!=e.url&&e.url.length>0&&(r=e.url.substring(e.url.lastIndexOf("/")+1),console.log(r),e.bascule(e.path+r),e.$store.commit("parle/setFileUrl",e.path+r));case 9:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e.$store.state.websocket.socket,console.log("SOCKET FROM STORE",s),s.onmessage=function(e){e.data&&"pub"===e.data.slice(0,3)&&(console.log("updated",e.data),this.getMessages(e.data.substring(4)))}.bind(e);case 3:case"end":return t.stop()}}),t)})))()},methods:{createWebSocket:function(){var e=this.$store.state.parle.root,t=e.split("//")[1],s=t.split("/")[0]+"/",r=new WebSocket("wss://"+s,["solid.0.1.0"]);this.$store.commit("websocket/setSocket",r)},addSubscription:function(e){this.$store.state.websocket.socket.send("sub "+e)},bascule:function(e){console.log("Part",e),this.$store.commit("parle/setFileUrl",e),this.path=e.substr(0,e.lastIndexOf("/")+1),console.log(this.path),void 0!=this.$store.state.websocket.socket&&this.$store.state.websocket.socket.send("sub "+e),this.makeToast("We have switched to",e,"info"),this.getMessages(e)},sort:function(){this.messages.reverse()},formatDate:function(e){return[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-")},new_sub:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var r,n,a,o,i,u,d,f,p,b;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(console.log(e),r=prompt("Create a sub-channel from "+e),!(null!=r&&r.length>0)){s.next=42;break}return console.log(r),r=r.split(" ").join("_"),n=e.substr(0,e.lastIndexOf("/")+1),a=e.split("#").pop(),console.log("Parent",n,a),o=n+r+"/",i=t.date+".ttl",u=o+i,console.log("Child",o,i),t.$store.commit("parle/setFileUrl",u),void 0!=t.$store.state.websocket.socket&&t.$store.state.websocket.socket.send("sub "+u),s.next=16,t.fc.itemExists(u);case 16:if(s.sent){s.next=21;break}return s.next=19,t.fc.postFile(u,"","text/turtle").then((function(e){console.log("File Created",e)})).catch((function(e){return console.error("Error: ".concat(e))}));case 19:s.next=22;break;case 21:console.log("File exist",u);case 22:return s.next=24,Object(c["b"])(u);case 24:return d=s.sent,d.addSubject,f=d.addSubject({identifier:"this"}),f.addLiteral(l["a"].created,t.date),f.addNodeRef(l["f"].isPartOf,e),f.addNodeRef(l["b"].maker,t.$store.state.solid.webId),s.next=32,d.save();case 32:return s.next=34,Object(c["b"])(e);case 34:return p=s.sent,b=p.getSubject(e),b.addRef(l["f"].hasPart,u),s.next=39,p.save();case 39:t.bascule(u),s.next=43;break;case 42:alert("You must provide a name to create a sub Channel");case 43:case"end":return s.stop()}}),s)})))()},makeToast:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(t,{title:e,variant:s,solid:!0})}},watch:{url:function(e){console.log("url changed",e);var t=e.substring(e.lastIndexOf("/")+1);console.log(t),this.$store.commit("parle/setFileUrl",this.path+t),this.bascule(this.path+t)}},computed:{file:function(){var e=this.path+this.date+".ttl";return this.$store.commit("parle/setFileUrl",e),void 0!=this.$store.state.websocket.socket&&1==this.$store.state.websocket.socket.readyState&&this.$store.state.websocket.socket.send("sub "+e),this.getMessages(e),e},webId:function(){return this.$store.state.solid.webId},messages:function(){return this.$store.state.parle.messages},url:{get:function(){return this.$store.state.parle.url},set:function(){}}}},f=d,p=s("2877"),b=Object(p["a"])(f,r,n,!1,null,null,null);t["default"]=b.exports},c975:function(e,t,s){"use strict";var r=s("23e7"),n=s("4d64").indexOf,a=s("a640"),o=s("ae40"),i=[].indexOf,c=!!i&&1/[1].indexOf(1,-0)<0,l=a("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(e){return c?i.apply(this,arguments)||0:n(this,e,arguments.length>1?arguments[1]:void 0)}})},e58c:function(e,t,s){"use strict";var r=s("fc6a"),n=s("a691"),a=s("50c4"),o=s("a640"),i=s("ae40"),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),f=i("indexOf",{ACCESSORS:!0,1:0}),p=u||!d||!f;e.exports=p?function(e){if(u)return l.apply(this,arguments)||0;var t=r(this),s=a(t.length),o=s-1;for(arguments.length>1&&(o=c(o,n(arguments[1]))),o<0&&(o=s+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:l}}]);
//# sourceMappingURL=chunk-94f9418a.098ac520.js.map