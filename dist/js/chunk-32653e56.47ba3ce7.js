(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32653e56"],{"60b0":function(e,t,o){"use strict";var n=o("c976"),i=o.n(n);i.a},b803:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modele-view"},[e._v(" EditorNetwork "+e._s(e.file.url)),o("br"),e._v(" TITLE : "+e._s(e.node.label)),o("br"),o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.node-popup",modifiers:{"node-popup":!0}}]},[e._v("Launch demo modal")]),o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.edge-popup",modifiers:{"edge-popup":!0}}]},[e._v("Launch demo modal")]),o("b-button",{on:{click:e.clear}},[e._v("Clear")]),o("b-input",{model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}}),o("b-button",{on:{click:e.create}},[e._v("New")]),o("network",{ref:"network",staticClass:"wrapper",attrs:{nodes:e.nodes,edges:e.edges,options:e.options},on:{select:function(t){return e.networkEvent("select")},"select-node":function(t){return e.networkEvent("selectNode")},"select-edge":function(t){return e.networkEvent("selectEdge")}}}),o("NodeModal",{on:{ok:e.saveNode},model:{value:e.node,callback:function(t){e.node=t},expression:"node"}}),o("EdgeModal",{on:{ok:e.saveEdge},model:{value:e.edge,callback:function(t){e.edge=t},expression:"edge"}}),o("b-list-group",e._l(e.triples,(function(t,n){return o("b-list-group-item",{key:n},[o("div",{staticClass:"row"},[o("div",{staticClass:"col rounded"},[o("b",[o("a",{attrs:{href:t.subject.id,target:"_blank"}},[e._v(e._s(t.subject.id))])])]),o("div",{staticClass:"col"},[e._v(" "+e._s(t.predicate.id)+" ")]),o("div",{staticClass:"col"},[t.object.id.startsWith("http")?o("span",[o("b",[o("a",{attrs:{href:t.object.id,target:"_blank"}},[e._v(e._s(t.object.id))])])]):o("span",[e._v(" "+e._s(t.object.id)+" ")])])])])})),1)],1)},i=[],s=(o("4160"),o("c975"),o("d81d"),o("b0c0"),o("d3b7"),o("8a79"),o("159b"),o("53ca")),r=(o("96cf"),o("1da1")),l=o("4d8d"),a=o("6dc1"),d=(o("38b4"),o("234f")),c={name:"EditorNetwork",mixins:[d["a"]],components:{NodeModal:function(){return o.e("chunk-fad8e306").then(o.bind(null,"b7ab"))},EdgeModal:function(){return o.e("chunk-4e25104e").then(o.bind(null,"4e1d"))}},data:function(){return{filename:"",triples:[],node:{},edge:{},nodes:[],edges:[],options:{locale:navigator.language,nodes:{borderWidth:1},edges:{arrows:"to",color:"red",scaling:{label:!0},smooth:!0},interaction:{navigationButtons:!0,keyboard:!0},manipulation:{}}}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.file=e.$store.state.solid.file,e.update();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this,t=this;this.$refs.network.setOptions({manipulation:{enabled:!0,addNode:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(o,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n(),o.id=e.tmp_file.url+"#"+o.id,console.log(o),e.editNode(o,n);case 4:case"end":return t.stop()}}),t)})));function o(e,o){return t.apply(this,arguments)}return o}(),editNode:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(o,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n(),console.log(o),e.editNode(o,n);case 3:case"end":return t.stop()}}),t)})));function o(e,o){return t.apply(this,arguments)}return o}(),addEdge:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(o,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n(),console.log(o),e.addEdge(o,n);case 3:case"end":return t.stop()}}),t)})));function o(e,o){return t.apply(this,arguments)}return o}(),editEdge:{editWithoutDrag:function(e,o){o(),console.log(e),t.editEdge(e,o)}}}})},methods:{saveNode:function(e){console.log("saveNode",e);var t=this.nodes.map((function(e){return e.id})).indexOf(e.id);console.log(t),t>-1?(console.log(this.nodes[t]),this.nodes[t].label=e.label):this.nodes.push(e)},saveEdge:function(e){console.log("saveEdge",e);var t=this.edges.map((function(e){return e.id})).indexOf(e.id);console.log(t),t>-1?(console.log(this.edges[t]),this.edges[t].label=e.label):this.edges.push(e)},create:function(){this.clear(),console.log(this.file),console.log(this.newfile),console.log(this.folder),this.tmp_file={},this.tmp_file.name=this.filename.endsWith(".ttl")?this.filename:this.filename+".ttl",this.tmp_file.url=this.folder.url+this.tmp_file.name,console.log(this.tmp_file);var e={id:this.tmp_file.url+"#this",label:"#this"};this.nodes.push(e)},clear:function(){this.nodes=[],this.edges=[]},update:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.triples=[],console.log(e.file.url),void 0==e.file.url||!e.file.url.endsWith(".ttl")&&!e.file.url.endsWith("card")){t.next=11;break}return t.next=5,Object(l["b"])(e.file.url);case 5:o=t.sent,console.log("fileDoc",o),e.triples=o.getTriples(),console.log(e.triples),t.next=12;break;case 11:console.log(e.file.url);case 12:case"end":return t.stop()}}),t)})))()},networkEvent:function(e){console.log(e)},addInterests:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n,i,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,solid.data[e].storage;case 2:return n=o.sent,i=n+"public/popock/profile.ttl",console.log("P8U",i),o.prev=5,o.next=8,Object(l["b"])(i);case 8:return t.profileDoc=o.sent,o.next=11,t.profileDoc.getSubject(i+"#me");case 11:return s=o.sent,o.next=14,s.getAllLiterals(a["b"].topic_interest);case 14:t.interests=o.sent,console.log(t.interests),t.interests.forEach((function(o){t.$refs.network.nodes.push({id:o,label:o,shape:"triangle",color:"green"}),t.$refs.network.edges.push({from:e,to:o,label:"foaf:topic_interest"})})),o.next=21;break;case 19:o.prev=19,o.t0=o["catch"](5);case 21:case"end":return o.stop()}}),o,null,[[5,19]])})))()},addTriplet:function(e){var t=this.colorize(e.subject.id),o=this.lastPart(e.subject.id),n={id:e.subject.id,label:o,shape:"star",color:"rgba("+t.red+", "+t.green+", "+t.blue+",0.5)"};this.addOrNothingNode(n);var i=this.colorize(e.object.id),s=this.lastPart(e.object.id),r={id:e.object.id,label:s,shape:"box",color:"rgba("+i.red+", "+i.green+", "+i.blue+",0.5)"};this.addOrNothingNode(r);var l=this.lastPart(e.predicate.id),a={from:n.id,to:r.id,label:l};this.edges.push(a)},editNode:function(e){console.log("editNode",e),this.node=e,this.$bvModal.show("node-popup")},addEdge:function(e,t){if(console.log("addedge"),this.edge=e,e.from==e.to){var o=confirm("Do you want to connect the node to itself?");if(1!=o)return void t(null)}this.editEdgeWithoutDrag(e,t)},editEdge:function(e,t){console.log("edit edge",e,t),this.editEdgeWithoutDrag(e,t)},editEdgeWithoutDrag:function(e,t){console.log("edit editWithoutDrag",e),this.edge=e,this.$bvModal.show("edge-popup"),console.log(e,t),t()},clearNodePopUp:function(){document.getElementById("node-saveButton").onclick=null,document.getElementById("node-cancelButton").onclick=null,document.getElementById("node-popUp").style.display="none"},cancelNodeEdit:function(e){this.clearNodePopUp(),e(null)},saveNodeData:function(e,t){e.label=document.getElementById("node-label").value,this.clearNodePopUp(),t(e)},clearEdgePopUp:function(){document.getElementById("edge-saveButton").onclick=null,document.getElementById("edge-cancelButton").onclick=null,document.getElementById("edge-popUp").style.display="none"},cancelEdgeEdit:function(e){this.clearEdgePopUp(),e(null)},saveEdgeData:function(e,t){"object"===Object(s["a"])(e.to)&&(e.to=e.to.id),"object"===Object(s["a"])(e.from)&&(e.from=e.from.id),e.label=document.getElementById("edge-label").value,this.clearEdgePopUp(),t(e)}},watch:{node:function(){console.log("NODE ADD ",this.node)},file:function(){console.log("watch"),this.update()},$route:function(e,t){console.log(e,t,this.$route)},storage:function(e){console.log(e)},friends:function(e){var t=this;console.log(e),e.forEach((function(e){t.$refs.network.nodes.push({id:e,label:e,shape:"dot",color:"yellow"}),t.$refs.network.edges.push({from:t.webId,to:e,label:"foaf:friend"}),t.addInterests(e)}))},webId:function(e){console.log(e),this.$refs.network.nodes.push({id:e,label:e}),this.addInterests(e)},triples:function(){var e=this;console.log("TRIPLES",this.triples),this.triples.length>0&&this.triples.forEach((function(t){e.addTriplet(t)}))}},computed:{folder:function(){return this.$store.state.solid.folder},profile_url:{get:function(){return this.$store.state.solid.storage+"public/popock/profile.ttl"},set:function(){}},storage:{get:function(){return this.$store.state.solid.storage},set:function(){}},webId:{get:function(){return this.$store.state.solid.webId},set:function(){}},friends:{get:function(){return this.$store.state.solid.friends},set:function(){}},file:{get:function(){return this.$store.state.solid.file},set:function(e){return this.$store.commit("solid/setFile",e)}}}},u=c,f=(o("60b0"),o("2877")),p=Object(f["a"])(u,n,i,!1,null,null,null);t["default"]=p.exports},c976:function(e,t,o){},d81d:function(e,t,o){"use strict";var n=o("23e7"),i=o("b727").map,s=o("1dde"),r=o("ae40"),l=s("map"),a=r("map");n({target:"Array",proto:!0,forced:!l||!a},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-32653e56.47ba3ce7.js.map