{"version":3,"sources":["webpack:///./src/components/editor/EditorNetwork.vue?a597","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/components/editor/EditorNetwork.vue?d372","webpack:///src/components/editor/EditorNetwork.vue","webpack:///./src/components/editor/EditorNetwork.vue?d9ee","webpack:///./src/components/editor/EditorNetwork.vue?da55","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["$","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","this","len","length","actualStart","argumentsLength","arguments","TypeError","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","file","url","_s","node","label","model","value","callback","$$v","filename","expression","on","create","privacy","clear","copy","ref","nodes","edges","options","$event","networkEvent","saveNode","saveEdge","edge","staticRenderFns","name","components","mixins","networkMixin","data","self","net","manipulation","enabled","initiallyActive","addNode","editNode","addEdge","editEdge","created","folder","$store","state","solid","methods","tmp_file","id","console","log","n","$bvModal","show","e","r","confirm","cb","editEdgeWithoutDrag","index","map","x","push","writeEdgeToFile","eventName","sendActivity","watch","computed","component","$map","callbackfn","undefined"],"mappings":"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","file":"js/chunk-c700d8e0.bb5a9330.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorNetwork.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorNetwork.vue?vue&type=style&index=0&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modele-view\"},[_vm._v(\" Reprendre network3 \"),_c('small',[_vm._v(\" File: \"),_c('a',{attrs:{\"href\":_vm.file.url,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.file.url))]),_c('br'),_vm._v(\" Node: \"+_vm._s(_vm.node.label)),_c('br')]),_c('b-input',{attrs:{\"placeholder\":\"filename without spaces or any exotic char\"},model:{value:(_vm.filename),callback:function ($$v) {_vm.filename=$$v},expression:\"filename\"}}),_c('b-button',{on:{\"click\":_vm.create}},[_vm._v(\"New\")]),_c('b-form-checkbox',{staticClass:\"m-2\",attrs:{\"id\":\"checkbox-1\",\"name\":\"checkbox-1\",\"value\":\"public_write\",\"unchecked-value\":\"private_write\",\"checked\":\"\"},model:{value:(_vm.privacy),callback:function ($$v) {_vm.privacy=$$v},expression:\"privacy\"}},[_vm._v(\" Anyone can amend this file \")]),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"warning\"},on:{\"click\":_vm.clear}},[_vm._v(\"Clear\")]),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"success\"},on:{\"click\":_vm.copy}},[_vm._v(\"Copy\")]),_c('network',{ref:\"network\",staticClass:\"wrapper\",attrs:{\"nodes\":_vm.nodes,\"edges\":_vm.edges,\"options\":_vm.options},on:{\"select\":function($event){return _vm.networkEvent('select')},\"select-node\":function($event){return _vm.networkEvent('selectNode')},\"select-edge\":function($event){return _vm.networkEvent('selectEdge')}}}),_c('NodeModal',{on:{\"ok\":_vm.saveNode},model:{value:(_vm.node),callback:function ($$v) {_vm.node=$$v},expression:\"node\"}}),_c('EdgeModal',{on:{\"ok\":_vm.saveEdge},model:{value:(_vm.edge),callback:function ($$v) {_vm.edge=$$v},expression:\"edge\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"modele-view\">\r\n    Reprendre network3\r\n    <!--  <Component /> -->\r\n    <small>\r\n      File: <a :href=\"file.url\" target=\"_blank\">{{ file.url }}</a><br>\r\n      Node: {{node.label}}<br>\r\n    </small>\r\n\r\n    <!--  <b-button v-b-modal.node-popup>Launch demo modal</b-button>\r\n    <b-button v-b-modal.edge-popup>Launch demo modal</b-button>-->\r\n\r\n    <b-input placeholder=\"filename without spaces or any exotic char\" v-model=\"filename\" />\r\n    <b-button @click=\"create\">New</b-button>\r\n    <b-form-checkbox class=\"m-2\"\r\n    id=\"checkbox-1\"\r\n    v-model=\"privacy\"\r\n    name=\"checkbox-1\"\r\n    value=\"public_write\"\r\n    unchecked-value=\"private_write\"\r\n    checked> Anyone can amend this file\r\n  </b-form-checkbox>\r\n\r\n  <b-button @click=\"clear\" size=\"sm\" variant=\"warning\">Clear</b-button>\r\n  <b-button @click=\"copy\"  size=\"sm\" variant=\"success\">Copy</b-button>\r\n\r\n  <network ref=\"network\"\r\n  class=\"wrapper\"\r\n  :nodes=\"nodes\"\r\n  :edges=\"edges\"\r\n  :options=\"options\"\r\n  @select=\"networkEvent('select')\"\r\n  @select-node=\"networkEvent('selectNode')\"\r\n  @select-edge=\"networkEvent('selectEdge')\"\r\n\r\n  >\r\n</network>\r\n<!--  @nodes-mounted=\"networkEvent('nodes-mounted')\"\r\n@nodes-add=\"addNode\"\r\n@nodes-update=\"updateNode\"\r\n@nodes-remove=\"removeNode\"\r\n@edges-mounted=\"networkEvent('edges-mounted')\"\r\n@edges-add=\"addEdge\"\r\n@edges-update=\"updateEdge\"\r\n@edges-remove=\"removeEdge\"-->\r\n\r\n<NodeModal v-model=\"node\" @ok=\"saveNode\"/>\r\n<EdgeModal v-model=\"edge\" @ok=\"saveEdge\"/>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport \"vue-vis-network/node_modules/vis-network/dist/vis-network.css\";\r\n\r\nimport {  fetchDocument, createDocument } from 'tripledoc';\r\nimport { foaf, rdfs, dct, rdf } from 'rdf-namespaces'\r\nimport \"vue-vis-network/node_modules/vis-network/dist/vis-network.css\";\r\nimport {\r\n  getSolidDatasetWithAcl,\r\n  hasResourceAcl,\r\n  hasFallbackAcl,\r\n  hasAccessibleAcl,\r\n  //  createAcl,\r\n  createAclFromFallbackAcl,\r\n  getResourceAcl,\r\n  setPublicResourceAccess,\r\n  setAgentResourceAccess,\r\n  saveAclFor,\r\n} from \"@inrupt/solid-client\";\r\nimport networkMixin from '@/mixins/networkMixin'\r\nimport ActivityMixin from '@/mixins/ActivityMixin'\r\nimport ToastMixin from '@/mixins/ToastMixin'\r\n\r\nexport default {\r\n  name: 'EditorNetwork',\r\n  components: {\r\n    'NodeModal': () => import('@/components/network/NodeModal'),\r\n    'EdgeModal': () => import('@/components/network/EdgeModal'),\r\n  },\r\n  mixins: [networkMixin, ActivityMixin, ToastMixin],\r\n  data() {\r\n    return {\r\n      //  file: {url:\"file_url\"},\r\n      self:this,\r\n      node: {label: \"node_label\"},\r\n      edge: {},\r\n      filename: \"new_graph.ttl\",\r\n      privacy: \"public_write\",\r\n      net: {},\r\n      nodes: [\r\n        {id: 1,  label: 'circle',  shape: 'circle' },\r\n        {id: 2,  label: 'ellipse', shape: 'ellipse'},\r\n        {id: 3,  label: 'database',shape: 'database'},\r\n        {id: 4,  label: 'box',     shape: 'box'    },\r\n        {id: 5,  label: 'diamond', shape: 'diamond'},\r\n        {id: 6,  label: 'dot',     shape: 'dot'},\r\n        {id: 7,  label: 'square',  shape: 'square'},\r\n        {id: 8,  label: 'triangle',shape: 'triangle'},\r\n      ],\r\n      edges: [\r\n        {from: 1, to: 2},\r\n        {from: 2, to: 3},\r\n        {from: 2, to: 4},\r\n        {from: 2, to: 5},\r\n        {from: 5, to: 6},\r\n        {from: 5, to: 7},\r\n        {from: 6, to: 8}\r\n      ],\r\n      options: {\r\n        manipulation: {\r\n          enabled: true,\r\n          initiallyActive: true,\r\n          addNode: async (node, callback) => {\r\n            this.addNode(node, callback)\r\n          },\r\n          editNode: async (node, callback) => {\r\n            this.editNode(node, callback)\r\n          },\r\n          addEdge: async (node, callback) => {\r\n            this.addEdge(node, callback)\r\n          },\r\n          editEdge: async (node, callback) => {\r\n            this.editEdge(node, callback)\r\n          },\r\n\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created(){\r\n    this.folder = this.$store.state.solid.folder\r\n    //  console.log(\"route\",this.$route)\r\n    //  this.url = this.$route.params.url\r\n    //  this.getData()\r\n  },\r\n  methods: {\r\n\r\n    addNode(node, callback){\r\n      //  callback() // Node will be added via reactivity from Vuex\r\n      if (this.tmp_file != null ){\r\n        this.file = this.tmp_file\r\n      }\r\n      node.id = this.file.url+\"#\"+node.id\r\n      node.label = \"\"\r\n      //console.log(node)\r\n      this.editNode(node, callback)\r\n    },\r\n    editNode(n,cb){\r\n      console.log(\"EDIT NODE\",n,cb)\r\n      this.node = n\r\n      this.$bvModal.show(\"node-popup\")\r\n    },\r\n    addEdge(e,cb){\r\n      console.log(\"add edge\",e,cb)\r\n      this.edge = e\r\n      if (e.from == e.to) {\r\n        var r = confirm(\"Do you want to connect the node to itself?\");\r\n        if (r != true) {\r\n          cb(null);\r\n          return;\r\n        }\r\n      }\r\n      this.editEdgeWithoutDrag(e, cb);\r\n    },\r\n    editEdge(e,cb){\r\n      console.log(\"EDIT edge\",e,cb)\r\n      this.editEdgeWithoutDrag(e, cb);\r\n    },\r\n    editEdgeWithoutDrag(edge, callback){\r\n      //\r\n      //console.log(\"edit editWithoutDrag\",edge)\r\n      /*      // filling in the popup DOM elements\r\n      document.getElementById('edge-label').value = data.label;\r\n      document.getElementById('edge-saveButton').onclick = this.saveEdgeData.bind(this, data, callback);\r\n      document.getElementById('edge-cancelButton').onclick = this.cancelEdgeEdit.bind(this,callback);\r\n      document.getElementById('edge-popUp').style.display = 'block';\r\n      */\r\n      this.edge = edge\r\n      this.$bvModal.show(\"edge-popup\")\r\n      //console.log(edge, callback)\r\n      callback()\r\n    },\r\n\r\n    saveNode(n){\r\n      console.log(\"saveNode\",n)\r\n      var index = this.nodes.map(x => {\r\n        return x.id;\r\n      }).indexOf(n.id);\r\n      //console.log(index)\r\n      if(index > -1){\r\n        this.nodes.splice(index, 1);\r\n        //console.log(  this.nodes[index])\r\n        this.nodes[index].label = n.label\r\n      }else{\r\n        this.nodes.push(n)\r\n      }\r\n    },\r\n    saveEdge(e){\r\n      var index = this.edges.map(x => {\r\n        return x.id;\r\n      }).indexOf(e.id);\r\n      //console.log(index)\r\n      if(index > -1){\r\n        //console.log(  this.edges[index])\r\n        this.edges[index].label = e.label\r\n      }else{\r\n        this.edges.push(e)\r\n        this.writeEdgeToFile(e)\r\n      }\r\n    },\r\n\r\n    async  writeEdgeToFile(e){\r\n      if (this.tmp_file != null){\r\n        this.file = this.tmp_file\r\n      }\r\n      let subject  = this.nodes.filter(function(el) {\r\n        return el.id == e.from\r\n      });\r\n      let object  = this.nodes.filter(function(el) {\r\n        return el.id == e.to\r\n      });\r\n      //console.log(subject[0], e, object[0])\r\n\r\n      //let identifier = subject[0].id.indexOf(this.file) > 0 ? subject[0].id.split('#') : subject[0].id\r\n      let subj_identifier = subject[0].id.split('#')[1]\r\n      let obj_identifier = object[0].id.split('#')[1]\r\n\r\n\r\n      var dateObj = new Date();\r\n      var date = dateObj.toISOString()\r\n      let doc =  await fetchDocument(this.file.url)\r\n      //console.log(doc)\r\n      let subj = doc.addSubject({identifier: subj_identifier})\r\n      subj.addString(rdfs.label, subject[0].label)\r\n\r\n      subj.addString(dct.modified, date)\r\n\r\n      subj.addRef(foaf.maker, this.webId)\r\n\r\n\r\n      subj.addRef(this.file.url+\"#\"+e.label, object[0].id)\r\n      //subj.addRef(this.file.url+\"#\"+e.label, obj_identifier)\r\n      let obj = doc.addSubject({identifier: obj_identifier})\r\n      obj.addString(rdfs.label, object[0].label)\r\n      doc.save()\r\n    },\r\n    networkEvent(eventName,e) {\r\n      console.log(eventName,e)\r\n    },\r\n    copy(){\r\n      console.log(\"copy\")\r\n    },\r\n\r\n    async  create(){\r\n      this.clear()\r\n      // //console.log(this.file)\r\n      // //console.log(this.newfile)\r\n      // //console.log(this.folder)\r\n      console.log(this.privacy)\r\n      this.tmp_file = {}\r\n      this.filename = this.filename.split(' ').join('_');\r\n\r\n      this.tmp_file.name =  this.filename.endsWith('.ttl') ? this.filename : this.filename+\".ttl\"\r\n      this.tmp_file.url = this.folder.url+this.tmp_file.name\r\n      //console.log(this.tmp_file)\r\n      this.thisNode = {id:this.tmp_file.url+\"#this\", label: this.filename}\r\n      this.nodes.push(this.thisNode)\r\n\r\n      let doc = {}\r\n      //console.log(this.file.url)\r\n      let exist = false\r\n      try{\r\n        doc =  await fetchDocument(this.tmp_file.url)\r\n        exist = true\r\n      }catch(e){\r\n        doc =  await createDocument(this.tmp_file.url)\r\n        exist = false\r\n\r\n      }\r\n\r\n      var dateObj = new Date();\r\n      var date = dateObj.toISOString()\r\n      //let doc =  await fetchDocument(this.file.url)\r\n      //console.log(doc)\r\n      let subj = doc.addSubject({identifier: \"this\"})\r\n\r\n      if(exist == false){\r\n        let this_label = this.thisNode.label\r\n        subj.addString(rdfs.label, this_label)\r\n        subj.addString(dct.created, date)\r\n        subj.addRef(rdf.type, this.tmp_file.url+\"#Network\")\r\n        console.log(\"file created\", this.tmp_file.url)\r\n\r\n      }else{\r\n        subj.addString(dct.modified, date)\r\n        console.log(\"file modified\", this.tmp_file.url)\r\n\r\n      }\r\n      subj.addRef(foaf.maker, this.webId)\r\n      console.log(\"one\")\r\n      let s = await  doc.save()\r\n      console.log(\"two\", s)\r\n\r\n      if(this.privacy == \"public_write\"){\r\n\r\n        console.log(this.tmp_file.url)\r\n        const myDatasetWithAcl = await getSolidDatasetWithAcl(this.tmp_file.url);\r\n        console.log(myDatasetWithAcl)\r\n        // Obtain the SolidDataset's own ACL, if available,\r\n        // or initialise a new one, if possible:\r\n        let resourceAcl;\r\n        if (!hasResourceAcl(myDatasetWithAcl)) {\r\n          if (!hasAccessibleAcl(myDatasetWithAcl)) {\r\n            throw new Error(\r\n              \"The current user does not have permission to change access rights to this Resource.\"\r\n            );\r\n          }\r\n\r\n          if (!hasFallbackAcl(myDatasetWithAcl)) {\r\n            throw new Error(\r\n              \"The current user does not have permission to see who currently has access to this Resource.\"\r\n            );\r\n            // Alternatively, initialise a new empty ACL as follows,\r\n            // but be aware that if you do not give someone Control access,\r\n            // **nobody will ever be able to change Access permissions in the future**:\r\n            // resourceAcl = createAcl(myDatasetWithAcl);\r\n          }\r\n          resourceAcl = createAclFromFallbackAcl(myDatasetWithAcl);\r\n          console.log(\"create\")\r\n        } else {\r\n          resourceAcl = getResourceAcl(myDatasetWithAcl);\r\n          console.log(\"get\")\r\n        }\r\n        console.log(\"acl\",resourceAcl)\r\n        // Give someone Control access to the given Resource:\r\n        /*  const updatedAcl = setAgentResourceAccess(\r\n        resourceAcl,\r\n        \"https://some.pod/profile#webId\",\r\n        { read: false, append: false, write: false, control: true }\r\n      );*/\r\n      const ownerAcl = setAgentResourceAccess(resourceAcl,\r\n        this.webId,\r\n        { read: true, append: true, write: true, control: true },\r\n      );\r\n\r\n      let r =  await saveAclFor(myDatasetWithAcl, ownerAcl);\r\n      const publicAcl = setPublicResourceAccess(\r\n        resourceAcl,\r\n        { read: true, append: true, write: false, control: false },\r\n      );\r\n\r\n\r\n      // Now save the ACL:\r\n      //  let r =  await saveAclFor(myDatasetWithAcl, ownerAcl);\r\n      let rp =  await saveAclFor(myDatasetWithAcl, publicAcl);\r\n      console.log(r,rp)\r\n    }\r\n    this.createActivity()\r\n  },\r\n  createActivity(){\r\n    console.log(\"createActivity\")\r\n\r\n    this.net.displayType = \"Network\"\r\n    this.net.types = [\"Task\", \"http://www.w3.org/ns/ldp#Resource\"]\r\n    this.net.path = this.tmp_file.url\r\n    console.log(this.net)\r\n    this.activity = {\r\n      actor: {name: this.$store.state.solid.webId},\r\n      type:\"Create\",\r\n      summary: \"\",\r\n      object:{\r\n        name: this.thisNode.label,\r\n        url: this.tmp_file.url,\r\n        type:\"Network\"}\r\n      }\r\n\r\n      this.sendActivity()\r\n\r\n\r\n    },\r\n    clear(){\r\n      this.nodes = []\r\n      this.edges = []\r\n    },\r\n\r\n    /*async getData() {\r\n    let dataDoc = await fetchDocument(this.url);\r\n    let subj = dataDoc.getSubject(this.url+\"#this\")\r\n    console.log(subj)\r\n    let types = subj.getAllRefs(rdf.type)\r\n    console.log(types)\r\n  }*/\r\n},\r\n\r\nwatch:{\r\n  /*'$route' (to) {\r\n  //  '$route' (to, from) {\r\n  console.log(to)\r\n},\r\nurl(url){\r\nconsole.log(\"URL CHANGE\",url)\r\n}*/\r\n},\r\ncomputed:{\r\n  folder:{\r\n    get: function() { return this.$store.state.solid.folder},\r\n    set: function() {}\r\n  },\r\n  profile_url:{\r\n    get: function() { return this.$store.state.solid.storage+\"public/popock/profile.ttl\"},\r\n    set: function() {}\r\n  },\r\n  storage:{\r\n    get: function() { return this.$store.state.solid.storage},\r\n    set: function() {}\r\n  },\r\n  webId:{\r\n    get: function() { return this.$store.state.solid.webId},\r\n    set: function() {}\r\n  },\r\n  friends:{\r\n    get: function() { return this.$store.state.solid.friends},\r\n    set: function() {}\r\n  },\r\n  file: {\r\n    get: function () {return this.$store.state.solid.file},\r\n    set: function (file) {return this.$store.commit('solid/setFile', file)}\r\n  },\r\n},\r\n}\r\n</script>\r\n<style>\r\n.wrapper{\r\n  min-height: 100vh;\r\n  border: 1px solid black;\r\n  background: linear-gradient(to bottom, rgba(215, 215, 255), rgba(250, 250, 170));\r\n  padding: 10px;\r\n  height: 100vh;\r\n}\r\n#operation {\r\n  font-size:28px;\r\n}\r\n#node-popUp {\r\n  display:none;\r\n  position:absolute;\r\n  top:350px;\r\n  left:170px;\r\n  z-index:299;\r\n  width:250px;\r\n  height:120px;\r\n  background-color: #f9f9f9;\r\n  border-style:solid;\r\n  border-width:3px;\r\n  border-color: #5394ed;\r\n  padding:10px;\r\n  text-align: center;\r\n}\r\n#edge-popUp {\r\n  display:none;\r\n  position:absolute;\r\n  top:350px;\r\n  left:170px;\r\n  z-index:299;\r\n  width:250px;\r\n  height:90px;\r\n  background-color: #f9f9f9;\r\n  border-style:solid;\r\n  border-width:3px;\r\n  border-color: #5394ed;\r\n  padding:10px;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorNetwork.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorNetwork.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorNetwork.vue?vue&type=template&id=4906ee90&\"\nimport script from \"./EditorNetwork.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorNetwork.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditorNetwork.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}