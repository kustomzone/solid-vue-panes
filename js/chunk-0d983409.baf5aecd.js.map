{"version":3,"sources":["webpack:///./src/components/parle/ParleSend.vue?8562","webpack:///./src/components/parle/ParleSend.vue?065b","webpack:///src/components/parle/ParleSend.vue","webpack:///./src/components/parle/ParleSend.vue?8637","webpack:///./src/components/parle/ParleSend.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","webId","on","$event","type","indexOf","_k","keyCode","key","send","model","value","callback","$$v","message","expression","attrs","_v","staticRenderFns","name","components","data","methods","computed","$store","state","solid","component"],"mappings":"kHAAA,yBAA0f,EAAG,G,gECA7f,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAAe,MAAbN,EAAIO,MAAeH,EAAG,gBAAgB,CAACE,YAAY,cAAc,CAACF,EAAG,eAAe,CAACI,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQX,EAAIY,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOK,IAAI,SAAkB,KAAcd,EAAIe,KAAKN,KAAUO,MAAM,CAACC,MAAOjB,EAAW,QAAEkB,SAAS,SAAUC,GAAMnB,EAAIoB,QAAQD,GAAKE,WAAW,aAAajB,EAAG,uBAAuB,CAACA,EAAG,WAAW,CAACkB,MAAM,CAAC,QAAU,WAAWd,GAAG,CAAC,MAAQR,EAAIe,OAAO,CAACf,EAAIuB,GAAG,WAAW,IAAI,GAAGnB,EAAG,mBAAmB,CAACE,YAAY,gBAAgB,IAC/nBkB,EAAkB,G,0DCsBtB,GACEC,KAAM,YACNC,WAAF,CACI,iBAAoB,WAAxB,yDAGEC,KAAM,WACJ,MAAO,CACLP,QAAS,KAIbQ,QAAS,CACP,KADJ,WACA,6KAGA,6BACA,+BACA,iBACA,6BANA,wBAOA,uBACA,WACA,oBACA,kBAKA,qEAfA,UAiBA,kBAjBA,eAiBA,EAjBA,OAkBA,eACA,+BACA,uCACA,+BACA,6BAtBA,UAuBA,SAvBA,QAyBA,aAzBA,wBA2BA,2CA3BA,gDAmCEC,SAAF,CACItB,MADJ,WAEM,OAAON,KAAK6B,OAAOC,MAAMC,MAAMzB,SCzE6T,I,wBCQ9V0B,EAAY,eACd,EACAlC,EACAyB,GACA,EACA,KACA,WACA,MAIa,aAAAS,E","file":"js/chunk-0d983409.baf5aecd.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParleSend.vue?vue&type=style&index=0&id=5b8abd68&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParleSend.vue?vue&type=style&index=0&id=5b8abd68&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"solid-chat-send\"},[(_vm.webId != null)?_c('b-input-group',{staticClass:\"mt-3 input\"},[_c('b-form-input',{on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.send($event)}},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"variant\":\"warning\"},on:{\"click\":_vm.send}},[_vm._v(\"Send\")])],1)],1):_c('SolidLoginButton',{staticClass:\"mt-3 input\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"solid-chat-send\">\n    <!--<h1>Room name</h1> -->\n\n\n    <b-input-group class=\"mt-3 input\" v-if=\"webId != null\" >\n      <b-form-input v-model=\"message\" v-on:keyup.enter=\"send\"></b-form-input>\n      <b-input-group-append>\n        <!--  <b-button variant=\"outline-success\">Button</b-button>-->\n        <b-button variant=\"warning\" @click=\"send\" >Send</b-button>\n      </b-input-group-append>\n    </b-input-group>\n    <SolidLoginButton class=\"mt-3 input\" v-else />\n\n\n\n  </div>\n</template>\n\n<script>\nimport { fetchDocument } from 'tripledoc';\nimport {/*namedNode,*/ sioc, dct, foaf } from 'rdf-namespaces'\n\nexport default {\n  name: 'ParleSend',\n  components:{\n    'SolidLoginButton': () => import('@/components/solid/SolidLoginButton')\n  },\n\n  data: function () {\n    return {\n      message: \"\",\n    }\n  },\n\n  methods: {\n    async send(){\n      // please refer to https://github.com/scenaristeur/shighl/blob/9b4b61d06d8a20f55de3f2aa580cbc5fb840d584/src/Shighl-chat.js#L214\n      // and https://github.com/LDflex/LDflex/issues/53\n      let webId= this.$store.state.solid.webId\n      let fileUrl = this.$store.state.parle.fileUrl\n      console.log(fileUrl)\n      if (this.message.length > 0 && webId != null)    {\n        console.log(this.message)\n        var dateObj = new Date();\n        var messageId = \"Msg\"+dateObj.getTime()\n        var date = dateObj.toISOString()\n        //  let msgUrl = this.fileUrl+messageId\n        /*  console.log(msgUrl)\n        await solid.data[msgUrl].dct$created.add(date)\n        await solid.data[msgUrl].sioc$content.add(this.message)*/\n        console.log(\"WEBID\",this.$store.state.solid.webId, this.$store.state.count)\n\n        const chatDoc = await fetchDocument(fileUrl);\n        console.log(chatDoc)\n        let subj =   chatDoc.addSubject({identifier:messageId})\n        subj.addLiteral(sioc.content, this.message)\n        subj.addLiteral(dct.created, date)\n        subj.addNodeRef(foaf.maker, webId)\n        await chatDoc.save();\n\n        this.message=\"\"\n      }else{\n        alert ( \"You must login before posting ;-)\")\n      }\n      //  await solid.data[msgUrl].foaf$maker.add(namedNode('https://www.test.com')) // namedNode(`${webid}`)\n      //  await solid.data.from(this.url)[messageId]['http://www.w3.org/2005/01/wf/flow#message'].add(this.url)\n      //this.message = \"\"\n      //  await solid.data.from(this.url)[this.subject]['http://www.w3.org/2005/01/wf/flow#message'].add(namedNode(this.url))\n    }\n  },\n  computed:{\n    webId(){\n      return this.$store.state.solid.webId\n    },\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.input {\n  position: fixed;\n  bottom:0;\n  z-index: 999;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParleSend.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParleSend.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ParleSend.vue?vue&type=template&id=5b8abd68&scoped=true&\"\nimport script from \"./ParleSend.vue?vue&type=script&lang=js&\"\nexport * from \"./ParleSend.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ParleSend.vue?vue&type=style&index=0&id=5b8abd68&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b8abd68\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}