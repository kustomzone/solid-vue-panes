(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fda6be1a"],{"99af":function(e,t,n){"use strict";var r=n("23e7"),o=n("d039"),a=n("e8b5"),i=n("861d"),s=n("7b0b"),c=n("50c4"),l=n("8418"),u=n("65f0"),d=n("1dde"),b=n("b622"),p=n("2d00"),f=b("isConcatSpreadable"),h=9007199254740991,w="Maximum allowed index exceeded",m=p>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),g=d("concat"),x=function(e){if(!i(e))return!1;var t=e[f];return void 0!==t?!!t:a(e)},v=!m||!g;r({target:"Array",proto:!0,forced:v},{concat:function(e){var t,n,r,o,a,i=s(this),d=u(i,0),b=0;for(t=-1,r=arguments.length;t<r;t++)if(a=-1===t?i:arguments[t],x(a)){if(o=c(a.length),b+o>h)throw TypeError(w);for(n=0;n<o;n++,b++)n in a&&l(d,b,a[n])}else{if(b>=h)throw TypeError(w);l(d,b++,a)}return d.length=b,d}})},da0b:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"inbox-send"},[n("div",[n("b-button-toolbar",{attrs:{"aria-label":"Toolbar with button groups and dropdown menu"}},[n("b-button-group",{staticClass:"mx-1"},[n("b-button",{staticClass:"new",attrs:{title:"new",size:"sm",variant:"success"},on:{click:function(t){return t.stopPropagation(),e.init_new()}}},[n("b-icon-pencil-square",{attrs:{variant:"outline-success"},on:{click:function(t){return t.stopPropagation(),e.init_new()}}})],1)],1)],1)],1),n("b-modal",{attrs:{id:"reply",title:e.title},on:{ok:e.send}},[n("div",{staticClass:"container flush"},[n("b-form-group",{staticClass:"row"},[n("FriendsSelection",{on:{selected:e.onSelected}}),n("label",{attrs:{for:"destinataire"}},[e._v("WebId :")]),n("b-form-input",{attrs:{id:"destinataire",placeholder:"ex: https://spoggy-test.solid.community/profile/card#me"},model:{value:e.recipient,callback:function(t){e.recipient=t},expression:"recipient"}})],1)],1),n("b-list-group",[n("b-input-group",{attrs:{prepend:"Label"}},[n("b-form-input",{model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1),n("b-form-textarea",{attrs:{id:"textarea-rows",placeholder:"",rows:"8"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)],1)],1)},o=[],a=(n("99af"),n("4160"),n("fb6a"),n("d3b7"),n("ac1f"),n("1276"),n("159b"),n("96cf"),n("1da1")),i=n("4380"),s=n("00e8"),c=n.n(s),l=n("4d8d"),u=n("6dc1"),d=window.SolidFileClient;console.log("SFC",d);var b=new d(c.a),p={name:"InboxSend",mixins:[i["a"]],components:{FriendsSelection:function(){return n.e("chunk-2d0b219b").then(n.bind(null,"2359"))}},data:function(){return{title:"",content:"",new:!1,selected:[]}},methods:{init_new:function(){console.log("new"),this.new=!0,this.$bvModal.show("reply")},onSelected:function(e){this.selected=e,console.log(this.selected)},send:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("selected",e.selected),e.content.length>0?(n={},n.date=new Date(Date.now()),n.id=n.date.getTime(),n.sender=e.webId,n.content=e.content,n.label=e.label,r='\n        @prefix : <#>.\n        @prefix schem: <http://schema.org/>.\n        @prefix sch: <https://schema.org/>.\n        @prefix rd: <http://www.w3.org/2000/01/rdf-schema#>.\n\n        <>\n        a sch:Message;\n        schem:dateSent "'.concat(n.date.toISOString(),'";\n        schem:sender <').concat(n.sender,'>;\n        schem:text "').concat(n.content,'";\n        rd:label "').concat(n.label,'";\n        schem:abstract "this message can be opened with inbox of Popock https://scenaristeur.github.io/solid-vue-panes/".\n        '),console.log(r),o=e.getInbox,e.selected.forEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var a,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return a=e.sent,n.url=a+n.id+".ttl",console.log(n.url),e.prev=5,e.next=8,b.postFile(n.url,r,"text/turtle");case 8:return i=a+"log.ttl#"+n.id,e.next=11,b.itemExists(a+"log.ttl");case 11:if(e.sent){e.next=15;break}return console.log(i,"don't exist"),e.next=15,b.postFile(a+"log.ttl","","text/turtle");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),alert("one"+e.t0);case 20:return e.next=22,Object(l["b"])(a+"log.ttl");case 22:return s=e.sent,c=s.addSubject(),c.addNodeRef(u["f"].about,n.url),e.next=27,s.save();case 27:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}())):alert("content must not be empty");case 2:case"end":return t.stop()}}),t)})))()}},watch:{recipient:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.title="Reply to "+e.split("/").slice(2,3)[0],n.next=3,t.getInbox(e);case 3:t.r_inbox=n.sent;case 4:case"end":return n.stop()}}),n)})))()},oldContent:function(e){console.log(e),this.content=""}},computed:{webId:function(){return this.$store.state.solid.webId},recipient:function(){return this.$store.state.inbox.recipient},label:function(){return this.$store.state.inbox.label},oldContent:function(){return this.$store.state.inbox.oldContent}}},f=p,h=n("2877"),w=Object(h["a"])(f,r,o,!1,null,null,null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-fda6be1a.e1da15d5.js.map