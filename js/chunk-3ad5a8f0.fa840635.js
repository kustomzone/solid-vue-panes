(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ad5a8f0","chunk-65a42d50","chunk-65a42d50","chunk-65a42d50","chunk-2d0da906"],{4380:function(e,t,n){"use strict";n("4160"),n("b0c0"),n("159b"),n("96cf");var r=n("1da1"),s=n("4d8d"),a=n("6dc1"),o=window.solid;t["a"]={methods:{getProfile:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={friends:[]},n.webId=t,e.prev=2,e.next=5,Object(s["b"])(t);case 5:return r=e.sent,i=r.getSubject(t),e.next=9,i.getString(a["h"].fn);case 9:return n.name=e.sent,e.next=12,i.getString("http://www.w3.org/2006/vcard/ns#organization-name");case 12:return n.organization=e.sent,e.next=15,i.getString(a["h"].role);case 15:return n.role=e.sent,e.next=18,i.getRef(a["h"].hasAddress);case 18:if(c=e.sent,null==c){e.next=24;break}return u=r.getSubject(c),e.next=23,u.getString(a["h"].locality);case 23:n.locality=e.sent;case 24:return e.next=26,o.data[t].vcard$hasPhoto;case 26:l=e.sent,n.photo="".concat(l),e.next=33;break;case 30:e.prev=30,e.t0=e["catch"](2),this.makeToast(e.t0.message,t,"warning");case 33:return e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,this,[[2,30]])})));function t(t){return e.apply(this,arguments)}return t}(),getInbox:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],e.prev=1,e.next=4,Object(s["b"])(t);case 4:return r=e.sent,o=r.getSubject(t),e.next=8,o.getAllRefs(a["c"].inbox);case 8:n=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.makeToast(e.t0.message,t,"warning");case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(t){return e.apply(this,arguments)}return t}(),getFriends:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],e.prev=1,e.next=4,Object(s["b"])(t);case 4:return r=e.sent,o=r.getSubject(t),e.next=8,o.getAllRefs(a["b"].knows);case 8:n=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.makeToast(e.t0.message,t,"warning");case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(t){return e.apply(this,arguments)}return t}(),addIndex:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var o,i,c,u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t+"/index.ttl#this",i=new Date,c=i.toISOString(),u=this.$store.state.solid.indexes.puti,e.next=6,Object(s["b"])(u.url);case 6:return l=e.sent,e.next=9,l.addSubject();case 9:return d=e.sent,d.addLiteral(a["e"].label,r),d.addNodeRef("http://www.w3.org/ns/solid/terms#forClass",n),d.addNodeRef("http://www.w3.org/ns/solid/terms#instance",o),d.addLiteral(a["a"].created,c),e.next=16,l.save();case 16:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}(),getIndexes:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,o,i,c,u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={puti:{instances:[],classes:[]},prti:{instances:[],classes:[]}},e.prev=1,e.next=4,Object(s["b"])(t);case 4:return o=e.sent,i=o.getSubject(t),e.next=8,i.getNodeRef("http://www.w3.org/ns/solid/terms#publicTypeIndex");case 8:return c=e.sent,e.next=11,i.getNodeRef("http://www.w3.org/ns/solid/terms#privateTypeIndex");case 11:return u=e.sent,n.puti.url=c,n.prti.url=u,e.next=16,Object(s["b"])(c);case 16:return l=e.sent,e.next=19,l.findSubjects("http://www.w3.org/ns/solid/terms#forClass");case 19:d=e.sent,d.forEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getRef("http://www.w3.org/ns/solid/terms#forClass");case 2:return r=e.sent,e.next=5,t.getRef("http://www.w3.org/ns/solid/terms#instance");case 5:return s=e.sent,e.next=8,t.getString(a["a"].created);case 8:return o=e.sent,e.next=11,t.getString(a["e"].label);case 11:i=e.sent,n.puti.instances.push({instance:s,classe:r,label:i,created:o}),void 0==n.puti.classes[r]&&(n.puti.classes[r]=[]),n.puti.classes[r].push(s);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=25;break;case 23:e.prev=23,e.t0=e["catch"](1);case 25:return console.log(t,n),e.abrupt("return",n);case 27:case"end":return e.stop()}}),e,null,[[1,23]])})));function t(t){return e.apply(this,arguments)}return t}(),makeToast:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(t,{title:e,variant:n,solid:!0})}}}},"4ca5":function(e,t,n){"use strict";var r=n("fb0f"),s=n.n(r);s.a},"6bae":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"solid-login"},[null==e.webId?n("b-button",{attrs:{variant:"success"},on:{click:e.login}},[e._v("Login")]):n("b-button",{attrs:{variant:"danger"},on:{click:e.logout}},[e._v("Logout")])],1)},s=[],a=(n("96cf"),n("1da1")),o=n("00e8"),i=n.n(o),c=n("4380"),u={name:"SolidLogin",mixins:[c["a"]],data:function(){return{webId:null}},created:function(){var e=this;i.a.trackSession(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=8;break}e.webId=null,console.log("The user is not logged in",e.webId),e.$store.dispatch("solid/setWebId",e.webId),e.$store.commit("solid/setFriends",[]),e.$store.commit("solid/setProfile",{}),t.next=25;break;case 8:return e.webId=n.webId,console.log("TODO must getFriends & getProfile only once"),console.log("The user is ".concat(n.webId)),e.$store.dispatch("solid/setWebId",e.webId),t.next=14,e.getFriends(e.webId);case 14:return e.friends=t.sent,e.$store.commit("solid/setFriends",e.friends),t.next=18,e.getProfile(e.webId);case 18:return e.profile=t.sent,e.$store.commit("solid/setProfile",e.profile),t.next=22,e.getIndexes(e.webId);case 22:e.indexes=t.sent,console.log("Indexes",e.indexes),e.$store.commit("solid/setIndexes",e.indexes);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},methods:{login:function(){console.log("login"),this.popupLogin()},logout:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.a.logout();case 2:case"end":return e.stop()}}),e)})))()},popupLogin:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.a.currentSession();case 2:if(t=e.sent,console.log("Current session before login",t),n="./dist-popup/popup.html",t){e.next=11;break}return e.next=8,i.a.popupLogin({popupUri:n});case 8:t=e.sent,e.next=12;break;case 11:console.log(t);case 12:case"end":return e.stop()}}),e)})))()}}},l=u,d=n("2877"),p=Object(d["a"])(l,r,s,!1,null,null,null);t["default"]=p.exports},eeb9:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"solid-chat-send"},[null!=e.webId?n("b-input-group",{staticClass:"mt-3 input"},[n("b-form-input",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send(t)}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"warning"},on:{click:e.send}},[e._v("Send")])],1)],1):n("SolidLogin",{staticClass:"mt-3 input"})],1)},s=[],a=(n("96cf"),n("1da1")),o=n("4d8d"),i=n("6dc1"),c=n("6bae"),u={name:"ParleSend",components:{SolidLogin:c["default"]},data:function(){return{message:""}},methods:{send:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,s,a,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$store.state.solid.webId,r=e.$store.state.parle.fileUrl,console.log(r),!(e.message.length>0&&null!=n)){t.next=22;break}return console.log(e.message),s=new Date,a="Msg"+s.getTime(),c=s.toISOString(),console.log("WEBID",e.$store.state.solid.webId,e.$store.state.count),t.next=11,Object(o["b"])(r);case 11:return u=t.sent,console.log(u),l=u.addSubject({identifier:a}),l.addLiteral(i["g"].content,e.message),l.addLiteral(i["a"].created,c),l.addNodeRef(i["b"].maker,n),t.next=19,u.save();case 19:e.message="",t.next=23;break;case 22:alert("You must login before posting ;-)");case 23:case"end":return t.stop()}}),t)})))()}},computed:{webId:function(){return this.$store.state.solid.webId}}},l=u,d=(n("4ca5"),n("2877")),p=Object(d["a"])(l,r,s,!1,null,"77596e24",null);t["default"]=p.exports},fb0f:function(e,t,n){}}]);
//# sourceMappingURL=chunk-3ad5a8f0.fa840635.js.map