{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.starts-with.js","webpack:///./src/components/editor/EditorNetwork.vue?a597","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/components/editor/EditorNetwork.vue?01e2","webpack:///./src/mixins/TripleMixin.js","webpack:///src/components/editor/EditorNetwork.vue","webpack:///./src/components/editor/EditorNetwork.vue?d9ee","webpack:///./src/components/editor/EditorNetwork.vue?da55","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["$","getOwnPropertyDescriptor","f","toLength","notARegExp","requireObjectCoercible","correctIsRegExpLogic","IS_PURE","nativeStartsWith","startsWith","min","Math","CORRECT_IS_REGEXP_LOGIC","MDN_POLYFILL_BUG","descriptor","String","prototype","writable","target","proto","forced","searchString","that","this","index","arguments","length","undefined","search","call","slice","toAbsoluteIndex","toInteger","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","max","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","actualStart","argumentsLength","TypeError","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","file","url","_s","node","label","model","value","callback","$$v","filename","expression","on","create","privacy","clear","copy","openCommand","ref","nodes","edges","options","$event","networkEvent","saveNode","saveEdge","edge","saveCommand","command","staticRenderFns","data","commandHistory","methods","getInputType","iv","inputObject","isValidUrl","type","isFile","firstChar","charAt","last","inputNew","catchCommande","s","p","o","traiteTriplet","console","log","message","result","lastChar","messageCut","split","isTriplet","detectLiteral","messageCutTemp","forEach","part","trim","push","substr","endsWith","pop","indexOf","tripletvalue","subject","predicate","object","catchTriplet","triplet","sujetNode","network","body","get","filter","objetNode","sub_n","color","border","document","getElementById","background","add","obj_n","id","inherit","commande","style","display","downloadCanvas","exportTtl","n","cid","e","listeInfos","Array","listeComplementaire","i","sujet","propriete","replace","objet","sujetLabel","objetLabel","error","sujetWithPrefix","validRdf","proprieteWithPrefix","objetWithPrefix","typedeProp","indiceTypeDeProp","toLowerCase","uniq_fast","sort","l","a","seen","out","j","item","string","valid","srcCanvas","childNodes","canvas","destinationCanvas","createElement","width","height","destCtx","getContext","fillStyle","fillRect","drawImage","image","toDataURL","tmpLink","download","href","appendChild","click","removeChild","pathname","URL","_","traiteInput","io","params","source","name","components","mixins","networkMixin","self","net","arrows","scaling","smooth","interaction","navigationButtons","keyboard","manipulation","enabled","initiallyActive","addNode","editNode","addEdge","editEdge","created","folder","$store","state","solid","tmp_file","$bvModal","show","r","confirm","cb","editEdgeWithoutDrag","map","x","writeEdgeToFile","eventName","copyText","navigator","clipboard","writeText","then","app","makeToast","sendActivity","addTriplet","colorize","t","subjectNode","colorO","addOrNothingNode","objectNode","propertyEdge","watch","computed","component","$map","callbackfn"],"mappings":"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","file":"js/chunk-26aa14ae.d18ad2eb.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\nvar nativeStartsWith = ''.startsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return nativeStartsWith\n      ? nativeStartsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorNetwork.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorNetwork.vue?vue&type=style&index=0&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modele-view\"},[_vm._v(\" Reprendre network3 \"),_c('small',[_vm._v(\" File: \"),_c('a',{attrs:{\"href\":_vm.file.url,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.file.url))]),_c('br'),_vm._v(\" Node: \"+_vm._s(_vm.node.label)),_c('br')]),_c('b-input',{attrs:{\"placeholder\":\"filename without spaces or any exotic char\"},model:{value:(_vm.filename),callback:function ($$v) {_vm.filename=$$v},expression:\"filename\"}}),_c('b-button',{on:{\"click\":_vm.create}},[_vm._v(\"New\")]),_c('b-form-checkbox',{staticClass:\"m-2\",attrs:{\"id\":\"checkbox-1\",\"name\":\"checkbox-1\",\"value\":\"public_write\",\"unchecked-value\":\"private_write\",\"checked\":\"\"},model:{value:(_vm.privacy),callback:function ($$v) {_vm.privacy=$$v},expression:\"privacy\"}},[_vm._v(\" Anyone can amend this file \")]),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"warning\"},on:{\"click\":_vm.clear}},[_vm._v(\"Clear\")]),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"success\"},on:{\"click\":_vm.copy}},[_vm._v(\"Copy\")]),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"success\"},on:{\"click\":_vm.openCommand}},[_vm._v(\"Command\")]),_c('network',{ref:\"network\",staticClass:\"wrapper\",attrs:{\"nodes\":_vm.nodes,\"edges\":_vm.edges,\"options\":_vm.options},on:{\"select\":function($event){return _vm.networkEvent('select')},\"select-node\":function($event){return _vm.networkEvent('selectNode')},\"select-edge\":function($event){return _vm.networkEvent('selectEdge')}}}),_c('NodeModal',{on:{\"ok\":_vm.saveNode},model:{value:(_vm.node),callback:function ($$v) {_vm.node=$$v},expression:\"node\"}}),_c('EdgeModal',{on:{\"ok\":_vm.saveEdge},model:{value:(_vm.edge),callback:function ($$v) {_vm.edge=$$v},expression:\"edge\"}}),_c('CommandModal',{on:{\"ok\":_vm.saveCommand},model:{value:(_vm.command),callback:function ($$v) {_vm.command=$$v},expression:\"command\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nexport default {\r\n  data() {\r\n    return {\r\n      commandHistory: []\r\n    }\r\n  },\r\n  methods: {\r\n    getInputType(iv){\r\n      var inputObject = {};\r\n\r\n      // si commence par http --> type = url\r\n      if (this.isValidUrl(iv)){\r\n        inputObject.type = \"url\";\r\n        inputObject.value = iv;\r\n        inputObject.isFile = this.isFile(iv)\r\n      }else{\r\n        // selon le premier charactère, on detecte une commande\r\n        let firstChar = iv.charAt(0);\r\n        let last = \"\"\r\n        switch(firstChar){\r\n          case '/':\r\n          //    let commande = rdf.quad(rdf.blankNode(), rdf.namedNode('commande'),rdf.literal(message))\r\n          //  this.catchCommande(message,this.network,this);\r\n\r\n          inputObject.type = \"commande\";\r\n          inputObject.value = iv;\r\n          inputObject.inputNew = \"\";\r\n          this.catchCommande(inputObject)\r\n          break;\r\n\r\n          case '.':\r\n          last = this.commandHistory[this.commandHistory.length-1];\r\n          inputObject.inputNew = last.s+\" \"+last.p+\" \"+last.o;\r\n          break;\r\n\r\n          case ';':\r\n          last = this.commandHistory[this.commandHistory.length-1];\r\n          inputObject.inputNew = last.s+\" \"+last.p+\" \";\r\n          break;\r\n\r\n          case ',':\r\n          last = this.commandHistory[this.commandHistory.length-1];\r\n          inputObject.inputNew = last.s+\" \";\r\n          break;\r\n\r\n\r\n          default:\r\n          // si le premier charactère n'indique pas une commande, on traite comme un triplet\r\n          inputObject = this.traiteTriplet(iv);\r\n        //  this.catchTriplet(inputObject)\r\n        console.log(\"TODO is catchTriplet Necessaire ici ?\")\r\n        }\r\n      }\r\n\r\n      //si termine par virgule, point, point-virgule, tiret --> triplet\r\n\r\n      return inputObject;\r\n    },\r\n    traiteTriplet(message){\r\n      var result = {}\r\n      var inputNew = \"\";\r\n      let lastChar = message.slice(-1);\r\n      let messageCut = message.slice(0,-1).split(\" \");\r\n      let isTriplet = true;\r\n      //  console.log(messageCut);\r\n\r\n      let detectLiteral = \"\";\r\n      let messageCutTemp = [];\r\n      messageCut.forEach(function(part){\r\n        part = part.trim();\r\n        //  console.log(part);\r\n        if (part.startsWith('\"')){\r\n          detectLiteral =\"debut\";\r\n          //  console.log(detectLiteral);\r\n          messageCutTemp.push(part.substr(1));\r\n        }else if (part.endsWith('\"')){\r\n          detectLiteral = \"fin\";\r\n          //console.log(detectLiteral);\r\n          messageCutTemp.push(messageCutTemp.pop()+\" \"+part.slice(0,-1));\r\n        }else if (detectLiteral == \"debut\"){\r\n          //  console.log(\"recupere le dernier et lui ajoute part\" )\r\n          messageCutTemp.push(messageCutTemp.pop()+\" \"+part)\r\n        }else {\r\n          messageCutTemp.push(part);\r\n        }\r\n      });\r\n      if (messageCutTemp.length > 0){\r\n        messageCut = messageCutTemp;\r\n      }\r\n      switch(lastChar){\r\n        case '.':\r\n        inputNew = \"\";\r\n        break;\r\n        case ';':\r\n        if (messageCut[0].indexOf(\" \") > -1){\r\n          inputNew = '\"'+messageCut[0]+'\"'+' ';\r\n        }else{\r\n          inputNew = messageCut[0]+' ';\r\n        }\r\n        break;\r\n        case ',':\r\n        if (messageCut[0].indexOf(\" \") > -1){\r\n          inputNew = '\"'+messageCut[0]+'\" ';\r\n        }else{\r\n          inputNew = messageCut[0]+' ';\r\n        }\r\n        if (messageCut[1].indexOf(\" \") > -1){\r\n          inputNew += '\"'+messageCut[1]+'\" ';\r\n        }else{\r\n          inputNew += messageCut[1]+' ';\r\n        }\r\n        break;\r\n        case '-':\r\n        if (messageCut[2].indexOf(\" \") > -1){\r\n          inputNew = '\"'+messageCut[2]+'\"'+' ';\r\n        }else{\r\n          inputNew = messageCut[2]+' ';\r\n        }\r\n        break;\r\n        default:\r\n        console.log(\"message to chat \"+message)\r\n        //this.sendMessage(message);\r\n        //  this.agentInput.send('agentSocket', {type: \"sendMessage\", message:message});\r\n        //  this.catchTriplet(message.slice(0,-1), this.network); // A REMPLACER PAR CATCHTRIPLETS V2\r\n        inputNew = \"\";\r\n        isTriplet = false;\r\n      }\r\n      if (isTriplet){\r\n        //  console.log(\"est Triplet\",messageCut)\r\n        result.type = \"triplet\";\r\n        var tripletvalue = {};\r\n        tripletvalue.subject = messageCut[0];\r\n        tripletvalue.predicate = messageCut[1];\r\n        tripletvalue.object = messageCut[2];\r\n        result.value = tripletvalue;\r\n        result.inputNew = inputNew;\r\n      }else {\r\n        //  console.log(\"n'est pas triplet\")\r\n        result.type = \"message\";\r\n        result.value = message;\r\n        result.inputNew = inputNew;\r\n      }\r\n\r\n      return result;\r\n    },\r\n\r\n    catchTriplet(triplet){\r\n      //  console.log(triplet)\r\n      var subject = triplet.value.subject;\r\n      var predicate = triplet.value.predicate;\r\n      var object = triplet.value.object;\r\n      // console.log(message.length);\r\n      //message=message.trim();\r\n      //var tripletString = message.substring(2).trim().split(\" \");\r\n      // les noeuds existent-ils ?\r\n      var sujetNode = this.network.body.data.nodes.get({\r\n        filter: function(node){\r\n          //    console.log(node);\r\n          return (node.label == subject );\r\n        }\r\n      });\r\n      var objetNode = this.network.body.data.nodes.get({\r\n        filter: function(node){\r\n          //    console.log(node);\r\n          return (node.label == object);\r\n        }\r\n      });\r\n      //  console.log(sujetNode);\r\n      //  console.log(objetNode);\r\n      // sinon, on les créé\r\n      if (sujetNode.length == 0){\r\n        var sub_n = {label: subject, color:{\r\n          border : document.getElementById(\"bordercolorpicker\").value ,\r\n          background : document.getElementById(\"bodycolorpicker\").value }\r\n        };\r\n        this.network.body.data.nodes.add(sub_n);\r\n      }\r\n      if (objetNode.length == 0){\r\n        var obj_n = {label: object, color:{\r\n          border : document.getElementById(\"bordercolorpicker\").value ,\r\n          background : document.getElementById(\"bodycolorpicker\").value }\r\n        };\r\n        this.network.body.data.nodes.add(obj_n);\r\n      }\r\n      // maintenant ils doivent exister, pas très po=ropre comme méthode , à revoir\r\n      sujetNode = this.network.body.data.nodes.get({\r\n        filter: function(node){\r\n          return (node.label == subject );\r\n        }\r\n      });\r\n      objetNode = this.network.body.data.nodes.get({\r\n        filter: function(node){\r\n          //  console.log(node);\r\n          return (node.label == object);\r\n        }\r\n      });\r\n      this.network.body.data.edges.add({\r\n        label: predicate,\r\n        from : sujetNode[0].id,\r\n        to : objetNode[0].id,\r\n        color: {inherit:'both'}\r\n\r\n      });\r\n      //on récupère ce edge pour l'envoyer au serveur\r\n      var edge = this.network.body.data.edges.get({\r\n        filter: function(edge) {\r\n          return (edge.from == sujetNode[0].id && edge.to == objetNode[0].id && edge.label == predicate);\r\n        }\r\n      });\r\n      console.log(\"EDGE is necessaire ici ?\",edge)\r\n      //  console.log(\"OK\",autofit,autofocus)\r\n      //this.network.fit();\r\n      //  fitAndFocus(sujetNode[0].id);\r\n\r\n    },\r\n\r\n\r\n\r\n    catchCommande(commande){\r\n      console.log(commande)\r\n      switch(commande.value) {\r\n        case \"/h\":\r\n        case \"/help\":\r\n        case \"/aide\":\r\n        //console.log(this.$.dialogs)\r\n        console.log(\"help\")\r\n        //  this.$.dialogs.$.helpPopUp.toggle();\r\n        //  this.agentInput.send('agentDialogs', {type:'toggle', popup: 'helpPopUp'})\r\n        break;\r\n        case \"/e\":\r\n        case \"/export\":\r\n        case \"/exportJson\":\r\n        console.log(\"exportjson\")\r\n        //  this.exportJson(this.network)\r\n        //this.exportJson();\r\n        //  this.agentInput.send('agentGraph', {type: 'exportJson'})\r\n        //this.agentInput.send(\"agentVis\", {type: 'exportJson'});\r\n        break;\r\n        case \"/t\":\r\n        console.log(\"exportTtl\")\r\n        //  this.exportTtl(this.network)\r\n        //  this.exportTtl(this.network,this);\r\n        //  this.agentInput.send('agentGraph', {type:'exportTtl'}); // , what: 'network', to: 'agentDialogs', where: 'inputTextToSave'\r\n        //    this.agentInput.send('agentDialogs', {type:'toggle', popup: 'popupTtl'})\r\n        //  this.agentInput.send(\"agentVis\", {type: 'exportTtl'});\r\n        break;\r\n        case \"/i\":\r\n        case \"/import\":\r\n        case \"/importJson\":\r\n        console.log(\"import\");\r\n        document.getElementById('import-popUp').style.display = 'block';\r\n        break;\r\n        case \"/p\":\r\n        console.log(\"save_to_pod\");\r\n        document.getElementById('select-pod-popUp').style.display = 'block';\r\n        break;\r\n        case \"/a\":\r\n        console.log(\"open editor\");\r\n        document.getElementById('editeur-popUp').style.display = 'block';\r\n        /*  const editorDialog = new mdc.dialog.MDCDialog(document.getElementById('editor_dialog'));\r\n        editorDialog.open();*/\r\n        //  document.getElementById('select-pod-popUp').style.display = 'block';\r\n        break;\r\n        case \"/r\":\r\n        console.log(\"reglages editor\");\r\n        // const reglagesDialog = new mdc.dialog.MDCDialog(document.getElementById('reglages_dialog'));\r\n        // reglagesDialog.open();\r\n        //  document.getElementById('select-pod-popUp').style.display = 'block';\r\n        break;\r\n        case \"/n\":\r\n        console.log(\"new graph\");\r\n        //  newGraph();\r\n        this.clear()\r\n        //  level < 6? increaseLevel() : \"\";\r\n        break;\r\n        case \"/l\":\r\n        console.log(\"connection a la base levelgraph\");\r\n        break;\r\n        case \"/c\":\r\n        //  console.log(\"capture_graphe\");\r\n        this.downloadCanvas()\r\n        break;\r\n        default:\r\n        console.log(\"non traite\"+ commande);\r\n        //  return afficheCommandes();\r\n      }\r\n    },\r\n    //###############################################################################\r\n    //Sous cette ligne, review de code a faire\r\n    //###############################################################################\r\n\r\n\r\n    // exportJson(network) {\r\n    //\r\n    //   var nodes_edges = { nodes: network.body.data.nodes.get(), edges: network.body.data.edges.get() };\r\n    //   //  console.log(nodes_edges);\r\n    //   var nodes_edgesJSON = JSON.stringify(nodes_edges);\r\n    //   updateEditorFromNetwork(nodes_edgesJSON)\r\n    //\r\n    // },\r\n    exportTtl(network) {\r\n      /* source https://github.com/scenaristeur/dreamcatcherAutonome/blob/master/autonome/public/agents/ExportAgent.js */\r\n      //  let network = this.network;\r\n      //  var nodes = network.body.data.nodes.get();\r\n      //var edges = network.body.data.edges.get();\r\n      // on ne prend pas le cluster cid=1 correspondant à la navigation pour l'export\r\n      var nodes = network.body.data.nodes.get({\r\n        filter: function (n) {\r\n          return (n.cid != 1);\r\n        }\r\n      });\r\n      var edges = network.body.data.edges.get({\r\n        filter: function (e) {\r\n          return (e.cid != 1);\r\n        }\r\n      });\r\n      console.log(\"exportation\");\r\n      console.log(nodes);\r\n      console.log(edges);\r\n      //creation des statements (triplets)\r\n      /*var statements = [];\r\n      for (var j = 0; j < edges.length; j++){\r\n      var edge = edges[j];\r\n      console.log(edge);\r\n      statements.push({sujet: node.id, propriete: \"rdfs:label\", objet: node.label});\r\n    }\r\n    console.log(statements);*/\r\n\r\n    var output = \"@prefix : <http://smag0.blogspot.fr/spoggy#> . \\n\";\r\n    output += \"@prefix owl: <http://www.w3.org/2002/07/owl#> . \\n\";\r\n    output += \"@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> . \\n\";\r\n    output += \"@prefix xml: <http://www.w3.org/XML/1998/namespace> . \\n\";\r\n    output += \"@prefix xsd: <http://www.w3.org/2001/XMLSchema#> . \\n\";\r\n    output += \"@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> . \\n\";\r\n    output += \"@prefix smag: <http://smag0.blogspot.fr/spoggy#> . \\n\";\r\n    output += \"@base <http://smag0.blogspot.fr/spoggy> . \\n\";\r\n    //output += \"<http://smag0.blogspot.fr/spoggy> rdf:type owl:Ontology ;  \\n\";\r\n    //output += \"                    owl:versionIRI <http://smag0.blogspot.fr/spoggy/1.0.0> . \\n\";\r\n    output += \" \\n\";\r\n    //output += \"owl:Class rdfs:subClassOf owl:Thing .  \\n\";\r\n\r\n    var listeInfos = new Array();\r\n    var listeComplementaire = new Array();\r\n\r\n    for (var i = 0; i < edges.length; i++) {\r\n      var edge = edges[i];\r\n\r\n      var sujet = edge.from;\r\n      var propriete = edge.label.replace(/\\s/g, \"_\");\r\n      var objet = edge.to;\r\n\r\n\r\n      //string.indexOf(substring) > -1\r\n      //console.log(sujet);\r\n      //console.log(propriete);\r\n      console.log(objet);\r\n\r\n      // AJOUTER EVENTUELLEMENT LA RECUPERATION DE SHAPE, COLOR, pour l'export RDF\r\n      var sujetLabel = network.body.data.nodes.get(sujet).label.replace(/\\n/g, \"\");\r\n      try{\r\n        var objetLabel = network.body.data.nodes.get(objet).label.replace(/\\n/g, \"\");\r\n      }catch(error)\r\n      {\r\n        console.error(\"ERREUR NONTRAITEE\")\r\n        console.error(error)\r\n\r\n      }\r\n\r\n      //console.log(\"#########################\");\r\n      //console.log(sujetLabel);\r\n      //console.log(objetLabel)\r\n      //console.log(\"#########################\");\r\n\r\n      var sujetWithPrefix = this.validRdf(network, sujet);\r\n      var proprieteWithPrefix = this.validRdf(network, propriete);\r\n      var objetWithPrefix = this.validRdf(network, objet);\r\n\r\n      if (sujetWithPrefix.indexOf(':') == -1) { // ne contient pas de ':'\r\n        sujetWithPrefix = '_:' + sujetWithPrefix; // blanknode\r\n      }\r\n\r\n      if (proprieteWithPrefix.indexOf(':') == -1) { // ne contient pas de ':'\r\n        proprieteWithPrefix = ':' + proprieteWithPrefix; // propriete utilisant \"@base <http://smag0.blogspot.fr/spoggy>\"\r\n\r\n      }\r\n\r\n      if (objetWithPrefix.indexOf(':') == -1) { // ne contient pas de ':'\r\n        objetWithPrefix = '_:' + objetWithPrefix;  // blanknode\r\n      }\r\n\r\n\r\n      var typedeProp = [\"owl:AnnotationProperty\", \"owl:ObjectProperty\", \"owl:DatatypeProperty\"];\r\n      var indiceTypeDeProp = 1; // -1 pour ne pas ajouter la prop, sinon par defaut en annotationProperty, 1 pour Object, 2 pour Datatype --> revoir pour les datatypes\r\n\r\n      if (\r\n        (proprieteWithPrefix == \"type\") ||\r\n        (proprieteWithPrefix == \":type\") ||\r\n        (proprieteWithPrefix == \"rdf:type\") ||\r\n        (proprieteWithPrefix == \":a\") ||\r\n        (proprieteWithPrefix == \":est_un\") ||\r\n        (proprieteWithPrefix == \":est_une\") ||\r\n        (proprieteWithPrefix == \":is_a\")\r\n      ) {\r\n        proprieteWithPrefix = \"rdf:type\";\r\n        listeComplementaire.push(objetWithPrefix + \" rdf:type owl:Class . \\n\");\r\n        indiceTypeDeProp = 1;\r\n      } else if ((proprieteWithPrefix == \"subClassOf\") || (proprieteWithPrefix == \":subClassOf\") || (proprieteWithPrefix == \"rdfs:subClassOf\")) {\r\n        proprieteWithPrefix = \"rdfs:subClassOf\";\r\n      }\r\n      else if ((proprieteWithPrefix == \"sameAs\") || (proprieteWithPrefix == \":sameAs\")) {\r\n        proprieteWithPrefix = \"owl:sameAs\";\r\n        indiceTypeDeProp = -1;\r\n      }\r\n      else if (\r\n        (proprieteWithPrefix.toLowerCase() == \"ispartof\") ||\r\n        (proprieteWithPrefix.toLowerCase() == \"partof\") ||\r\n        (proprieteWithPrefix.toLowerCase() == \":partof\") ||\r\n        (proprieteWithPrefix.toLowerCase() == \":ispartof\")) {\r\n          proprieteWithPrefix = \"smag:partOf\";\r\n          indiceTypeDeProp = 1;\r\n        } else if (\r\n          (proprieteWithPrefix.toLowerCase() == \"comment\") ||\r\n          (proprieteWithPrefix.toLowerCase() == \"commentaire\") ||\r\n          (proprieteWithPrefix.toLowerCase() == \"//\") ||\r\n          (proprieteWithPrefix.toLowerCase() == \"#\")\r\n        ) {\r\n          proprieteWithPrefix = \"rdfs:comment\";\r\n          indiceTypeDeProp = -1;\r\n        }\r\n        if (indiceTypeDeProp >= 0) {\r\n          listeComplementaire.push(proprieteWithPrefix + \" rdf:type \" + typedeProp[indiceTypeDeProp] + \" . \\n\");\r\n        }\r\n        var data = sujetWithPrefix + \" \" + proprieteWithPrefix + \" \" + objetWithPrefix + \" . \\n\";\r\n        data += sujetWithPrefix + \" \" + \"rdfs:label \\\"\" + sujetLabel + \"\\\" . \\n\";\r\n        data += objetWithPrefix + \" \" + \"rdfs:label \\\"\" + objetLabel + \"\\\" . \\n\";\r\n        listeInfos[i] = data;\r\n        console.log(data);\r\n        console.log(\"||||||||||||||||||||||--\");\r\n      }\r\n      //console.log(listeInfos);\r\n      //console.log(listeComplementaire);\r\n      //suppression des doublons\r\n      listeInfos = this.uniq_fast(listeInfos.sort());\r\n      listeComplementaire = this.uniq_fast(listeComplementaire.sort());\r\n      // console.log (listeInfos);\r\n      for (var k = 0; k < listeInfos.length; k++) {\r\n        output = output + listeInfos[k];\r\n        //  console.log(output);\r\n      }\r\n\r\n      for (var l = 0; l < listeComplementaire.length; l++) {\r\n        output = output + listeComplementaire[l];\r\n        //  console.log(output);\r\n      }\r\n      //  updateEditorFromNetworkTtl(output)\r\n      //this.$.dialogs.$.inputTextToSave.value = output; //     document.getElementById(\"inputTextToSave\").value =output;\r\n      /*this.$.dialogs.$.popupTtl.fitInto = this.$.dialogs.$.menu;*/\r\n      //this.$.dialogs.$.popupTtl.toggle();\r\n      //console.log(output)\r\n\r\n      //this.agentGraph.send('agentDialogs', {type:'exportTtl', ttlData : output});\r\n    },\r\n    uniq_fast(a) {\r\n      var seen = {};\r\n      var out = [];\r\n      var len = a.length;\r\n      var j = 0;\r\n      for(var i = 0; i < len; i++) {\r\n        var item = a[i];\r\n        if(seen[item] !== 1) {\r\n          seen[item] = 1;\r\n          out[j++] = item;\r\n        }\r\n      }\r\n      return out;\r\n    },\r\n\r\n    validRdf(network, string){\r\n      // A REVOIR\r\n      console.log(network.body.data.nodes.get(string));\r\n      console.log(\"nettoyage \"+ string);\r\n      // transformer le noeud en noeud rdf (resource ou literal)\r\n      // ajouter la construction du noeud, son uri, prefix, localname, type...\r\n      var valid = {};\r\n      valid.type = \"uri\";\r\n      if (string.indexOf(\" \") !== -1){\r\n        valid.type = \"literal\";\r\n      }else{\r\n        /*\r\n        replaceAll(string, \" \",\"_\");\r\n        replaceAll(string, \"\",\"_\");\r\n        replaceAll(string, \",\",\"_\");\r\n        replaceAll(string, \";\",\"_\");\r\n        replaceAll(string, \" \",\"_\");*/\r\n      }\r\n\r\n      return string;\r\n    },\r\n    downloadCanvas(){\r\n      // get canvas data\r\n      var srcCanvas = document.getElementById( 'mynetwork' ).childNodes[0].canvas;\r\n      console.log(srcCanvas)\r\n      let  destinationCanvas = document.createElement(\"canvas\");\r\n      destinationCanvas.width = srcCanvas.width;\r\n      destinationCanvas.height = srcCanvas.height;\r\n\r\n      let  destCtx = destinationCanvas.getContext('2d');\r\n\r\n      //create a rectangle with the desired color\r\n      destCtx.fillStyle = \"#FFFFFF\";\r\n      destCtx.fillRect(0,0,srcCanvas.width,srcCanvas.height);\r\n\r\n      //draw the original canvas onto the destination canvas\r\n      destCtx.drawImage(srcCanvas, 0, 0);\r\n\r\n      //finally use the destinationCanvas.toDataURL() method to get the desired output;\r\n\r\n      var image =   destinationCanvas.toDataURL(); //canvas.toDataURL(\"image/png\");\r\n\r\n      // create temporary link\r\n      var tmpLink = document.createElement( 'a' );\r\n      tmpLink.download = 'image.png'; // set the name of the download file\r\n      tmpLink.href = image;\r\n\r\n      // temporarily add link to body and initiate the download\r\n      document.body.appendChild( tmpLink );\r\n      tmpLink.click();\r\n      document.body.removeChild( tmpLink );\r\n    },\r\n    isFile(pathname) {\r\n      return pathname.split('/').pop().indexOf('.') > -1;\r\n    },\r\n\r\n    isValidUrl(string){\r\n      try {\r\n        new URL(string);\r\n        return true;\r\n      } catch (_) {\r\n        return false;\r\n      }\r\n    },\r\n    traiteInput(io){\r\n      console.log(io)\r\n      switch(io.type) {\r\n        case \"commande\":\r\n        //this.catchCommande(message, this.network, this);\r\n        // code block\r\n        break;\r\n        case \"triplet\":\r\n        // code block\r\n        break;\r\n        case \"url\":\r\n        // code block\r\n        var params = io;\r\n        params.source = io.value;\r\n        console.log(\"IMPORTER, see spoggy-simple /js/import-export\")\r\n        //  importer(params,updateGraph)\r\n        break;\r\n        default:\r\n        // code block\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n","<template>\r\n  <div class=\"modele-view\">\r\n    Reprendre network3\r\n    <!--  <Component /> -->\r\n    <small>\r\n      File: <a :href=\"file.url\" target=\"_blank\">{{ file.url }}</a><br>\r\n      Node: {{node.label}}<br>\r\n    </small>\r\n\r\n    <!--  <b-button v-b-modal.node-popup>Launch demo modal</b-button>\r\n    <b-button v-b-modal.edge-popup>Launch demo modal</b-button>-->\r\n\r\n    <b-input placeholder=\"filename without spaces or any exotic char\" v-model=\"filename\" />\r\n    <b-button @click=\"create\">New</b-button>\r\n    <b-form-checkbox class=\"m-2\"\r\n    id=\"checkbox-1\"\r\n    v-model=\"privacy\"\r\n    name=\"checkbox-1\"\r\n    value=\"public_write\"\r\n    unchecked-value=\"private_write\"\r\n    checked> Anyone can amend this file\r\n  </b-form-checkbox>\r\n\r\n  <b-button @click=\"clear\" size=\"sm\" variant=\"warning\">Clear</b-button>\r\n  <b-button @click=\"copy\"  size=\"sm\" variant=\"success\">Copy</b-button>\r\n  <b-button @click=\"openCommand\" size=\"sm\" variant=\"success\">Command</b-button>\r\n\r\n  <network ref=\"network\"\r\n  class=\"wrapper\"\r\n  :nodes=\"nodes\"\r\n  :edges=\"edges\"\r\n  :options=\"options\"\r\n  @select=\"networkEvent('select')\"\r\n  @select-node=\"networkEvent('selectNode')\"\r\n  @select-edge=\"networkEvent('selectEdge')\"\r\n\r\n  >\r\n</network>\r\n<!--  @nodes-mounted=\"networkEvent('nodes-mounted')\"\r\n@nodes-add=\"addNode\"\r\n@nodes-update=\"updateNode\"\r\n@nodes-remove=\"removeNode\"\r\n@edges-mounted=\"networkEvent('edges-mounted')\"\r\n@edges-add=\"addEdge\"\r\n@edges-update=\"updateEdge\"\r\n@edges-remove=\"removeEdge\"-->\r\n\r\n<NodeModal v-model=\"node\" @ok=\"saveNode\"/>\r\n<EdgeModal v-model=\"edge\" @ok=\"saveEdge\"/>\r\n<CommandModal v-model=\"command\" @ok=\"saveCommand\"/>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport \"vue-vis-network/node_modules/vis-network/dist/vis-network.css\";\r\n\r\nimport {  fetchDocument, createDocument } from 'tripledoc';\r\nimport { foaf, rdfs, dct, rdf } from 'rdf-namespaces'\r\nimport \"vue-vis-network/node_modules/vis-network/dist/vis-network.css\";\r\nimport {\r\n  getSolidDatasetWithAcl,\r\n  hasResourceAcl,\r\n  hasFallbackAcl,\r\n  hasAccessibleAcl,\r\n  //  createAcl,\r\n  createAclFromFallbackAcl,\r\n  getResourceAcl,\r\n  setPublicResourceAccess,\r\n  setAgentResourceAccess,\r\n  saveAclFor,\r\n} from \"@inrupt/solid-client\";\r\nimport networkMixin from '@/mixins/networkMixin'\r\nimport ActivityMixin from '@/mixins/ActivityMixin'\r\nimport ToastMixin from '@/mixins/ToastMixin'\r\nimport TripleMixin from '@/mixins/TripleMixin'\r\n\r\nexport default {\r\n  name: 'EditorNetwork',\r\n  components: {\r\n    'NodeModal': () => import('@/components/network/NodeModal'),\r\n    'EdgeModal': () => import('@/components/network/EdgeModal'),\r\n    'CommandModal': () => import('@/components/network/CommandModal'),\r\n  },\r\n  mixins: [networkMixin, ActivityMixin, ToastMixin, TripleMixin],\r\n  data() {\r\n    return {\r\n      //  file: {url:\"file_url\"},\r\n      self:this,\r\n      node: {label: \"node_label\"},\r\n      edge: {},\r\n      filename: \"new_graph.ttl\",\r\n      privacy: \"public_write\",\r\n      net: {},\r\n      command: \"\",\r\n      nodes: [\r\n        {id: 1,  label: 'circle',  shape: 'circle' },\r\n        {id: 2,  label: 'ellipse', shape: 'ellipse'},\r\n        {id: 3,  label: 'database',shape: 'database'},\r\n        {id: 4,  label: 'box',     shape: 'box'    },\r\n        {id: 5,  label: 'diamond', shape: 'diamond'},\r\n        {id: 6,  label: 'dot',     shape: 'dot'},\r\n        {id: 7,  label: 'square',  shape: 'square'},\r\n        {id: 8,  label: 'triangle',shape: 'triangle'},\r\n      ],\r\n      edges: [\r\n        {from: 1, to: 2},\r\n        {from: 2, to: 3},\r\n        {from: 2, to: 4},\r\n        {from: 2, to: 5},\r\n        {from: 5, to: 6},\r\n        {from: 5, to: 7},\r\n        {from: 6, to: 8}\r\n      ],\r\n      options: {\r\n        // locale: navigator.language,\r\n        // nodes: {\r\n        // //  borderWidth: 1\r\n        // },\r\n        edges:{\r\n          arrows: 'to',\r\n          //  color: 'red',\r\n          //  font: '12px arial #ff0000',\r\n          //  shadow: true,\r\n          //   font: '12px arial #ff0000',\r\n          scaling:{\r\n            label: true,\r\n          },\r\n          smooth: true,\r\n        },\r\n        interaction: {\r\n          navigationButtons: true,\r\n          keyboard: true\r\n        },\r\n        manipulation: {\r\n          enabled: true,\r\n          initiallyActive: true,\r\n          addNode: async (node, callback) => {\r\n            this.addNode(node, callback)\r\n          },\r\n          editNode: async (node, callback) => {\r\n            this.editNode(node, callback)\r\n          },\r\n          addEdge: async (node, callback) => {\r\n            this.addEdge(node, callback)\r\n          },\r\n          editEdge: async (node, callback) => {\r\n            this.editEdge(node, callback)\r\n          },\r\n\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created(){\r\n    this.folder = this.$store.state.solid.folder\r\n    //  console.log(\"route\",this.$route)\r\n    //  this.url = this.$route.params.url\r\n    //  this.getData()\r\n  },\r\n  methods: {\r\n    saveCommand(command){\r\n      console.log(\"COMMAND\",command)\r\n      let inputObject = this.getInputType(command)\r\n      console.log(\"inputObject\",inputObject);\r\n      this.traiteInput(inputObject);\r\n    //  this.updateInput(inputObject.inputNew)\r\n    },\r\n    addNode(node, callback){\r\n      //  callback() // Node will be added via reactivity from Vuex\r\n      if (this.tmp_file != null ){\r\n        this.file = this.tmp_file\r\n      }\r\n      node.id = this.file.url+\"#\"+node.id\r\n      node.label = \"\"\r\n      //console.log(node)\r\n      this.editNode(node, callback)\r\n    },\r\n    editNode(n,cb){\r\n      console.log(\"EDIT NODE\",n,cb)\r\n      this.node = n\r\n      this.$bvModal.show(\"node-popup\")\r\n    },\r\n    addEdge(e,cb){\r\n      console.log(\"add edge\",e,cb)\r\n      this.edge = e\r\n      if (e.from == e.to) {\r\n        var r = confirm(\"Do you want to connect the node to itself?\");\r\n        if (r != true) {\r\n          cb(null);\r\n          return;\r\n        }\r\n      }\r\n      this.editEdgeWithoutDrag(e, cb);\r\n    },\r\n    editEdge(e,cb){\r\n      console.log(\"EDIT edge\",e,cb)\r\n      this.editEdgeWithoutDrag(e, cb);\r\n    },\r\n    editEdgeWithoutDrag(edge, callback){\r\n      //\r\n      //console.log(\"edit editWithoutDrag\",edge)\r\n      /*      // filling in the popup DOM elements\r\n      document.getElementById('edge-label').value = data.label;\r\n      document.getElementById('edge-saveButton').onclick = this.saveEdgeData.bind(this, data, callback);\r\n      document.getElementById('edge-cancelButton').onclick = this.cancelEdgeEdit.bind(this,callback);\r\n      document.getElementById('edge-popUp').style.display = 'block';\r\n      */\r\n      this.edge = edge\r\n      this.$bvModal.show(\"edge-popup\")\r\n      //console.log(edge, callback)\r\n      callback()\r\n    },\r\n\r\n    saveNode(n){\r\n      console.log(\"saveNode\",n)\r\n      var index = this.nodes.map(x => {\r\n        return x.id;\r\n      }).indexOf(n.id);\r\n      //console.log(index)\r\n      if(index > -1){\r\n        this.nodes.splice(index, 1);\r\n        //console.log(  this.nodes[index])\r\n        this.nodes[index].label = n.label\r\n      }else{\r\n        this.nodes.push(n)\r\n      }\r\n    },\r\n    saveEdge(e){\r\n      var index = this.edges.map(x => {\r\n        return x.id;\r\n      }).indexOf(e.id);\r\n      //console.log(index)\r\n      if(index > -1){\r\n        //console.log(  this.edges[index])\r\n        this.edges[index].label = e.label\r\n      }else{\r\n        this.edges.push(e)\r\n        this.writeEdgeToFile(e)\r\n      }\r\n    },\r\n\r\n    async  writeEdgeToFile(e){\r\n      if (this.tmp_file != null){\r\n        this.file = this.tmp_file\r\n      }\r\n      let subject  = this.nodes.filter(function(el) {\r\n        return el.id == e.from\r\n      });\r\n      let object  = this.nodes.filter(function(el) {\r\n        return el.id == e.to\r\n      });\r\n      //console.log(subject[0], e, object[0])\r\n\r\n      //let identifier = subject[0].id.indexOf(this.file) > 0 ? subject[0].id.split('#') : subject[0].id\r\n      let subj_identifier = subject[0].id.split('#')[1]\r\n      let obj_identifier = object[0].id.split('#')[1]\r\n\r\n\r\n      var dateObj = new Date();\r\n      var date = dateObj.toISOString()\r\n      let doc =  await fetchDocument(this.file.url)\r\n      //console.log(doc)\r\n      let subj = doc.addSubject({identifier: subj_identifier})\r\n      subj.addString(rdfs.label, subject[0].label)\r\n\r\n      subj.addString(dct.modified, date)\r\n\r\n      subj.addRef(foaf.maker, this.webId)\r\n\r\n\r\n      subj.addRef(this.file.url+\"#\"+e.label, object[0].id)\r\n      //subj.addRef(this.file.url+\"#\"+e.label, obj_identifier)\r\n      let obj = doc.addSubject({identifier: obj_identifier})\r\n      obj.addString(rdfs.label, object[0].label)\r\n      doc.save()\r\n    },\r\n    networkEvent(eventName,e) {\r\n      console.log(eventName,e)\r\n    },\r\n    copy(){\r\n      let copyText = \"https://scenaristeur.github.io/solid-vue-panes/?url=\"+this.file.url //window.location.href\r\n      let app = this\r\n      //  !copyText.endsWith(\".ttl\") ?\r\n      //copyText = copyText+this.file.url //: \"\"\r\n      console.log(copyText)\r\n      navigator.clipboard.writeText(copyText).then(function() {\r\n        /* clipboard successfully set */\r\n        //  console.log(\"clipok\", copyText)\r\n        app.makeToast(\"The url is in your clipboard ;-)\", copyText+\".               Use Ctrl+V to share it\", \"success\")\r\n      }, function() {\r\n        /* clipboard write failed */\r\n        console.log(\"clipERROR\", copyText)\r\n        app.makeToast(\"Houston, we've got a problem with the clipboard ;-(\", copyText, \"warning\")\r\n      })\r\n\r\n    },\r\n\r\n    async  create(){\r\n      this.clear()\r\n      // //console.log(this.file)\r\n      // //console.log(this.newfile)\r\n      // //console.log(this.folder)\r\n      console.log(this.privacy)\r\n      this.tmp_file = {}\r\n      this.filename = this.filename.split(' ').join('_');\r\n\r\n      this.tmp_file.name =  this.filename.endsWith('.ttl') ? this.filename : this.filename+\".ttl\"\r\n      this.tmp_file.url = this.folder.url+this.tmp_file.name\r\n      //console.log(this.tmp_file)\r\n      this.thisNode = {id:this.tmp_file.url+\"#this\", label: this.filename}\r\n      this.nodes.push(this.thisNode)\r\n\r\n      let doc = {}\r\n      //console.log(this.file.url)\r\n      let exist = false\r\n      try{\r\n        doc =  await fetchDocument(this.tmp_file.url)\r\n        exist = true\r\n      }catch(e){\r\n        doc =  await createDocument(this.tmp_file.url)\r\n        exist = false\r\n\r\n      }\r\n\r\n      var dateObj = new Date();\r\n      var date = dateObj.toISOString()\r\n      //let doc =  await fetchDocument(this.file.url)\r\n      //console.log(doc)\r\n      let subj = doc.addSubject({identifier: \"this\"})\r\n\r\n      if(exist == false){\r\n        let this_label = this.thisNode.label\r\n        subj.addString(rdfs.label, this_label)\r\n        subj.addString(dct.created, date)\r\n        subj.addRef(rdf.type, this.tmp_file.url+\"#Network\")\r\n        console.log(\"file created\", this.tmp_file.url)\r\n\r\n      }else{\r\n        subj.addString(dct.modified, date)\r\n        console.log(\"file modified\", this.tmp_file.url)\r\n\r\n      }\r\n      subj.addRef(foaf.maker, this.webId)\r\n      console.log(\"one\")\r\n      let s = await  doc.save()\r\n      console.log(\"two\", s)\r\n\r\n      if(this.privacy == \"public_write\"){\r\n\r\n        console.log(this.tmp_file.url)\r\n        const myDatasetWithAcl = await getSolidDatasetWithAcl(this.tmp_file.url);\r\n        console.log(myDatasetWithAcl)\r\n        // Obtain the SolidDataset's own ACL, if available,\r\n        // or initialise a new one, if possible:\r\n        let resourceAcl;\r\n        if (!hasResourceAcl(myDatasetWithAcl)) {\r\n          if (!hasAccessibleAcl(myDatasetWithAcl)) {\r\n            throw new Error(\r\n              \"The current user does not have permission to change access rights to this Resource.\"\r\n            );\r\n          }\r\n\r\n          if (!hasFallbackAcl(myDatasetWithAcl)) {\r\n            throw new Error(\r\n              \"The current user does not have permission to see who currently has access to this Resource.\"\r\n            );\r\n            // Alternatively, initialise a new empty ACL as follows,\r\n            // but be aware that if you do not give someone Control access,\r\n            // **nobody will ever be able to change Access permissions in the future**:\r\n            // resourceAcl = createAcl(myDatasetWithAcl);\r\n          }\r\n          resourceAcl = createAclFromFallbackAcl(myDatasetWithAcl);\r\n          console.log(\"create\")\r\n        } else {\r\n          resourceAcl = getResourceAcl(myDatasetWithAcl);\r\n          console.log(\"get\")\r\n        }\r\n        console.log(\"acl\",resourceAcl)\r\n        // Give someone Control access to the given Resource:\r\n        /*  const updatedAcl = setAgentResourceAccess(\r\n        resourceAcl,\r\n        \"https://some.pod/profile#webId\",\r\n        { read: false, append: false, write: false, control: true }\r\n      );*/\r\n      const ownerAcl = setAgentResourceAccess(resourceAcl,\r\n        this.webId,\r\n        { read: true, append: true, write: true, control: true },\r\n      );\r\n\r\n      let r =  await saveAclFor(myDatasetWithAcl, ownerAcl);\r\n      const publicAcl = setPublicResourceAccess(\r\n        resourceAcl,\r\n        { read: true, append: true, write: false, control: false },\r\n      );\r\n\r\n\r\n      // Now save the ACL:\r\n      //  let r =  await saveAclFor(myDatasetWithAcl, ownerAcl);\r\n      let rp =  await saveAclFor(myDatasetWithAcl, publicAcl);\r\n      console.log(r,rp)\r\n    }\r\n    this.createActivity()\r\n  },\r\n  createActivity(){\r\n    console.log(\"createActivity\")\r\n\r\n    this.net.displayType = \"Network\"\r\n    this.net.types = [\"Task\", \"http://www.w3.org/ns/ldp#Resource\"]\r\n    this.net.path = this.tmp_file.url\r\n    console.log(this.net)\r\n    this.activity = {\r\n      actor: {name: this.$store.state.solid.webId},\r\n      type:\"Create\",\r\n      summary: \"\",\r\n      object:{\r\n        name: this.thisNode.label,\r\n        url: this.tmp_file.url,\r\n        type:\"Network\"}\r\n      }\r\n\r\n      this.sendActivity()\r\n\r\n\r\n    },\r\n    clear(){\r\n      this.nodes = []\r\n      this.edges = []\r\n    },\r\n    openCommand(){\r\n      this.$bvModal.show(\"command-popup\")\r\n    },\r\n    async update(){\r\n      this.triples = []\r\n      console.log(this.file.url)\r\n      if (this.file.url != undefined && (this.file.url.endsWith('.ttl') || (this.file.url.endsWith('card')))){\r\n        let fileDoc = await fetchDocument(this.file.url)\r\n        console.log(\"fileDoc\",fileDoc)\r\n        this.triples = fileDoc.getTriples()\r\n        console.log(this.triples)\r\n      }else{\r\n        console.log(\"TODO\",this.file.url)\r\n      }\r\n      if (this.triples.length > 0){\r\n        this.triples.forEach((t) => {\r\n          console.log(\"trip\",t)\r\n          this.addTriplet(t)\r\n        });\r\n\r\n      }\r\n\r\n    },\r\n    addTriplet(t){\r\n      // //console.log(t)\r\n      // //console.log(t.subject.id, t.predicate.id, t.object.id)\r\n\r\n      var color = this.colorize(t.subject.id)\r\n      let label =  this.lastPart(t.subject.id)\r\n      let subjectNode = { id:t.subject.id, label: label, shape: \"star\", color:'rgba('+color.red+', '+color.green+', '+color.blue+',0.5)'  }\r\n      // //console.log(subjectNode)\r\n      //  this.dataset.nodes[subjectNode.id] = subjectNode\r\n      subjectNode  = this.addOrNothingNode(subjectNode)\r\n\r\n      var colorO = this.colorize(t.object.id)\r\n      let labelO =  this.lastPart(t.object.id)\r\n      let objectNode = { id:t.object.id, label: labelO, shape: \"box\", color:'rgba('+colorO.red+', '+colorO.green+', '+colorO.blue+',0.5)'  }\r\n      // //console.log(objectNode)\r\n      //  this.dataset.nodes[subjectNode.id] = subjectNode\r\n      this.addOrNothingNode(objectNode)\r\n\r\n      let labelP = this.lastPart(t.predicate.id)\r\n      let propertyEdge = {from: subjectNode.id, to: objectNode.id, label: labelP}\r\n      this.edges.push(propertyEdge)\r\n\r\n\r\n    },\r\n\r\n    /*async getData() {\r\n    let dataDoc = await fetchDocument(this.url);\r\n    let subj = dataDoc.getSubject(this.url+\"#this\")\r\n    console.log(subj)\r\n    let types = subj.getAllRefs(rdf.type)\r\n    console.log(types)\r\n  }*/\r\n},\r\n\r\nwatch:{\r\n  file(){\r\n    console.log(this.file)\r\n    this.update()\r\n  },\r\n\r\n  /*'$route' (to) {\r\n  //  '$route' (to, from) {\r\n  console.log(to)\r\n},\r\nurl(url){\r\nconsole.log(\"URL CHANGE\",url)\r\n}*/\r\n},\r\ncomputed:{\r\n  folder:{\r\n    get: function() { return this.$store.state.solid.folder},\r\n    set: function() {}\r\n  },\r\n  profile_url:{\r\n    get: function() { return this.$store.state.solid.storage+\"public/popock/profile.ttl\"},\r\n    set: function() {}\r\n  },\r\n  storage:{\r\n    get: function() { return this.$store.state.solid.storage},\r\n    set: function() {}\r\n  },\r\n  webId:{\r\n    get: function() { return this.$store.state.solid.webId},\r\n    set: function() {}\r\n  },\r\n  friends:{\r\n    get: function() { return this.$store.state.solid.friends},\r\n    set: function() {}\r\n  },\r\n  file: {\r\n    get: function () {return this.$store.state.solid.file},\r\n    set: function (file) {return this.$store.commit('solid/setFile', file)}\r\n  },\r\n},\r\n}\r\n</script>\r\n<style>\r\n.wrapper{\r\n  min-height: 100vh;\r\n  border: 1px solid black;\r\n  background: linear-gradient(to bottom, rgba(215, 215, 255), rgba(250, 250, 170));\r\n  padding: 10px;\r\n  height: 100vh;\r\n}\r\n#operation {\r\n  font-size:28px;\r\n}\r\n#node-popUp {\r\n  display:none;\r\n  position:absolute;\r\n  top:350px;\r\n  left:170px;\r\n  z-index:299;\r\n  width:250px;\r\n  height:120px;\r\n  background-color: #f9f9f9;\r\n  border-style:solid;\r\n  border-width:3px;\r\n  border-color: #5394ed;\r\n  padding:10px;\r\n  text-align: center;\r\n}\r\n#edge-popUp {\r\n  display:none;\r\n  position:absolute;\r\n  top:350px;\r\n  left:170px;\r\n  z-index:299;\r\n  width:250px;\r\n  height:90px;\r\n  background-color: #f9f9f9;\r\n  border-style:solid;\r\n  border-width:3px;\r\n  border-color: #5394ed;\r\n  padding:10px;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorNetwork.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorNetwork.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorNetwork.vue?vue&type=template&id=1fd101c6&\"\nimport script from \"./EditorNetwork.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorNetwork.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditorNetwork.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}