(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0da906"],{"6bae":function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"solid-login"},[null==e.webId?t("b-button",{attrs:{variant:"success"},on:{click:e.login}},[e._v("Login")]):t("b-button",{attrs:{variant:"danger"},on:{click:e.logout}},[e._v("Logout")])],1)},r=[],s=(t("96cf"),t("1da1")),i=t("00e8"),c=t.n(i),a=t("4380"),u={name:"SolidLogin",mixins:[a["a"]],data:function(){return{webId:null}},created:function(){var e=this;c.a.trackSession(function(){var n=Object(s["a"])(regeneratorRuntime.mark((function n(t){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=8;break}e.webId=null,console.log("The user is not logged in",e.webId),e.$store.dispatch("solid/setWebId",e.webId),e.$store.commit("solid/setFriends",[]),e.$store.commit("solid/setProfile",{}),n.next=25;break;case 8:return e.webId=t.webId,console.log("TODO must getFriends & getProfile only once"),console.log("The user is ".concat(t.webId)),e.$store.dispatch("solid/setWebId",e.webId),n.next=14,e.getFriends(e.webId);case 14:return e.friends=n.sent,e.$store.commit("solid/setFriends",e.friends),n.next=18,e.getProfile(e.webId);case 18:return e.profile=n.sent,e.$store.commit("solid/setProfile",e.profile),n.next=22,e.getIndexes(e.webId);case 22:e.indexes=n.sent,console.log("Indexes",e.indexes),e.$store.commit("solid/setIndexes",e.indexes);case 25:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},methods:{login:function(){console.log("login"),this.popupLogin()},logout:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.a.logout();case 2:case"end":return e.stop()}}),e)})))()},popupLogin:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.a.currentSession();case 2:if(n=e.sent,console.log("Current session before login",n),t="./dist-popup/popup.html",n){e.next=11;break}return e.next=8,c.a.popupLogin({popupUri:t});case 8:n=e.sent,e.next=12;break;case 11:console.log(n);case 12:case"end":return e.stop()}}),e)})))()}}},l=u,d=t("2877"),p=Object(d["a"])(l,o,r,!1,null,null,null);n["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0da906.8487af46.js.map