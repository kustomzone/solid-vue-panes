(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-460f9322"],{"2ca0":function(e,t,r){"use strict";var o=r("23e7"),n=r("06cf").f,a=r("50c4"),s=r("5a34"),c=r("1d80"),i=r("ab13"),l=r("c430"),u="".startsWith,h=Math.min,d=i("startsWith"),g=!l&&!d&&!!function(){var e=n(String.prototype,"startsWith");return e&&!e.writable}();o({target:"String",proto:!0,forced:!g&&!d},{startsWith:function(e){var t=String(c(this));s(e);var r=a(h(arguments.length>1?arguments[1]:void 0,t.length)),o=String(e);return u?u.call(t,o,r):t.slice(r,r+o.length)===o}})},"7c6e":function(e,t,r){"use strict";r("96cf");var o=r("1da1"),n=r("00e8"),a=r.n(n);t["a"]={created:function(){this.fc=new SolidFileClient(a.a),console.log(this.fc)},methods:{readFolder:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.fc.itemExists(e);case 2:if(!r.sent){r.next=6;break}return r.abrupt("return",t.fc.readFolder(e).then((function(e){return console.log("Folder",e),t.$store.commit("crud/setShapeUrl",t.shape_url),e}),(function(t){console.log("erreur for url : ",e,t)})));case 6:console.log("url does not exist",e);case 7:case"end":return r.stop()}}),r)})))()}}}},a7f7:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-submit container"},[r("div",{staticClass:"mt-3"},[e._v(" "+e._s(e.message)+" "),e._v(" Workspace : "+e._s(e.workspace)),r("br"),r("b-button",{attrs:{variant:"warning"},on:{click:e.download}},[e._v("Download")]),r("b-button",{attrs:{variant:"info"},on:{click:e.save}},[e._v("Stream that Activity")]),r("b-button",{attrs:{variant:"success"},on:{click:e.saveWorkspace}},[e._v("Save on Workspace")]),r("b-button",{attrs:{variant:"success",disabled:""},on:{click:e.savePod}},[e._v("Save on my POD (public/shighltest) Add me to your trusted apps")]),r("b-button",{attrs:{variant:"success"},on:{click:e.savePublic}},[e._v("Save on holacratie Pod")])],1),r("ul",[r("li",[r("a",{attrs:{href:e.currentShape,target:"blank"}},[e._v("currentShape")])]),r("li",[r("a",{attrs:{href:e.webId,target:"blank"}},[e._v(e._s(e.webId))])]),r("li",[r("a",{attrs:{href:e.storage,target:"blank"}},[e._v(e._s(e.storage))])])])])},n=[],a=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("96cf"),r("1da1")),s=r("ae85"),c=(r("a15b"),r("4fad"),r("ac1f"),r("25f0"),r("5319"),r("1276"),r("2ca0"),r("3835")),i={mixins:[s["a"]],methods:{buildTtl:function(e){console.log(e);for(var t="@prefix : <#>.\n@prefix owl: <http://www.w3.org/2002/07/owl#> .\n@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n@prefix xml: <http://www.w3.org/XML/1998/namespace> .\n@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\n@prefix purl: <http://purl.org/dc/elements/1.1/>.\n@base <"+e.shape+"> .\n\n\n",r="_"+Math.random().toString(36).substr(2,9),o=r,n=0,a=Object.entries(e.form);n<a.length;n++){var s=Object(c["a"])(a[n],2),i=s[0],l=s[1];if(console.log(i,l),void 0!=l&&l.length>0){if(console.log("1"),"https://schema.org/name"==i&&l.length>0){console.log("2");var u=l.split(" ").join("_");o=u,t+=':this  rdfs:label  "'+l+'".\n',t+=':this  purl:title  "'+l+'".\n'}console.log("3"),console.log(i,l),l=l.startsWith("http")?"<"+l+">":'"'+l+'"',l=l.replace(/\n/gm,"#xA "),t+=":this  <"+i+">  "+l+". \n"}}t+=":this  rdf:type  <"+e.shape+">.";var h=this.$store.state.crud.shape;return console.log("CRUD SHAPE",h),console.log(t),o=o+"/"+o+".ttl#this",{filename:o,content:t,ttlData:e}}}},l=r("7c6e"),u={name:"FormSubmit",mixins:[s["a"],i,l["a"]],components:{},props:{attribut:String},created:function(){this.workspace=this.$store.state.crud.workspace},data:function(){return{message:""}},computed:{webId:function(){return this.$store.state.crud.webId},currentShape:function(){return this.$store.state.crud.currentShape},storage:function(){return this.$store.state.crud.storage},workspace:{get:function(){return this.$store.state.crud.workspace},set:function(){}}},methods:{save:function(){console.log("CurrentShape",this.currentShape),console.log("data",this.$store.state.crud.formData),console.log(this.$store.state.crud.formData[this.currentShape]);var e=this.$store.state.crud.formData[this.currentShape],t=this.streamActivity(this.webId,e);console.log(t),this.saveFile(t)},savePublic:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$store.state.crud.formData[e.currentShape],o={form:r,shape:e.currentShape,author:e.webId},n=e.buildTtl(o),console.log("TTL",n),a=n.ttlData.shape+"/"+n.filename,console.log(a),t.next=8,e.fc.createFile(a,n.content,"text/turtle").then((function(t){console.log(t),console.log(t.url),e.message=(new Date).toLocaleTimeString()+" : Saved at "+t.url,alert(e.message)}),(function(t){console.log(t),e.message=(new Date).toLocaleTimeString()+" : "+t+" It seems there is an issue to store on Holocratie POD ?",alert(e.message)}));case 8:case"end":return t.stop()}}),t)})))()},saveWorkspace:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$store.state.crud.formData[e.currentShape],console.log(e.fc),console.log(e.storage),o={form:r,shape:e.currentShape,author:e.webId},n=e.buildTtl(o),console.log("TTL",n),a=e.workspace+e.localname(e.currentShape)+"/"+n.filename,console.log(a),t.next=10,e.fc.createFile(a,n.content,"text/turtle").then((function(t){console.log(t),console.log(t.url),e.message=(new Date).toLocaleTimeString()+" : Saved at "+t.url,alert(e.message)}),(function(t){console.log(t),e.message=(new Date).toLocaleTimeString()+" : "+t+" Are you sure you are logged to your pod and you have allowed this app to write on ?",alert(e.message)}));case 10:case"end":return t.stop()}}),t)})))()},savePod:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$store.state.crud.formData[e.currentShape],console.log(e.fc),console.log(e.storage),o={form:r,shape:e.currentShape,author:e.webId},n=e.buildTtl(o),console.log("TTL",n),a=e.storage+"public/shighltest/"+e.localname(e.currentShape)+"/"+n.filename,console.log(a),t.next=10,e.fc.createFile(a,n.content,"text/turtle").then((function(t){console.log(t),console.log(t.url),e.message=(new Date).toLocaleTimeString()+" : Saved at "+t.url,alert(e.message)}),(function(t){console.log(t),e.message=(new Date).toLocaleTimeString()+" : "+t+" Are you sure you are logged to your pod and you have allowed this app to write on ?",alert(e.message)}));case 10:case"end":return t.stop()}}),t)})))()},download:function(){var e=this.$store.state.crud.formData[this.currentShape];e["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]=this.currentShape,console.log("DATA TO CREATE",e),this.saveFile(e)},saveFile:function(e){var t=this.localname(this.currentShape),r="json",o=JSON.stringify(e,void 0,2),n="";if(console.log(e),"undefined"!=typeof r&&r.length>0)switch(r){case"ttl":n=new Blob([o],{type:"text/turtle"});break;case"rdf":n=new Blob([o],{type:"application/rdf+xml"});break;case"json":n=new Blob([o],{type:"application/json"});break;default:console.log("non traite  , extension : "+r);break}var a=document.createElement("a");a.download=t,a.innerHTML="Download File",null!=window.URL?a.href=window.URL.createObjectURL(n):(a.href=window.URL.createObjectURL(n),a.onclick=this.destroyClickedElement,a.style.display="none",document.body.appendChild(a)),a.click()},destroyClickedElement:function(e){document.body.removeChild(e.target)}}},h=u,d=r("2877"),g=Object(d["a"])(h,o,n,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-460f9322.f16890c9.js.map