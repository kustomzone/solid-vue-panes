(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26aa14ae"],{"2ca0":function(e,t,o){"use strict";var n=o("23e7"),r=o("06cf").f,a=o("50c4"),i=o("5a34"),s=o("1d80"),l=o("ab13"),c=o("c430"),d="".startsWith,u=Math.min,f=l("startsWith"),p=!c&&!f&&!!function(){var e=r(String.prototype,"startsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!p&&!f},{startsWith:function(e){var t=String(s(this));i(e);var o=a(u(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return d?d.call(t,n,o):t.slice(o,o+n.length)===n}})},"60b0":function(e,t,o){"use strict";var n=o("c976"),r=o.n(n);r.a},a434:function(e,t,o){"use strict";var n=o("23e7"),r=o("23cb"),a=o("a691"),i=o("50c4"),s=o("7b0b"),l=o("65f0"),c=o("8418"),d=o("1dde"),u=o("ae40"),f=d("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,b=Math.min,g=9007199254740991,m="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var o,n,d,u,f,p,v=s(this),w=i(v.length),y=r(e,w),k=arguments.length;if(0===k?o=n=0:1===k?(o=0,n=w-y):(o=k-2,n=b(h(a(t),0),w-y)),w+o-n>g)throw TypeError(m);for(d=l(v,n),u=0;u<n;u++)f=y+u,f in v&&c(d,u,v[f]);if(d.length=n,o<n){for(u=y;u<w-n;u++)f=u+n,p=u+o,f in v?v[p]=v[f]:delete v[p];for(u=w;u>w-n+o;u--)delete v[u-1]}else if(o>n)for(u=w-n;u>y;u--)f=u+n-1,p=u+o-1,f in v?v[p]=v[f]:delete v[p];for(u=0;u<o;u++)v[u+y]=arguments[u+2];return v.length=w-n+o,d}})},b803:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modele-view"},[e._v(" Reprendre network3 "),o("small",[e._v(" File: "),o("a",{attrs:{href:e.file.url,target:"_blank"}},[e._v(e._s(e.file.url))]),o("br"),e._v(" Node: "+e._s(e.node.label)),o("br")]),o("b-input",{attrs:{placeholder:"filename without spaces or any exotic char"},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}}),o("b-button",{on:{click:e.create}},[e._v("New")]),o("b-form-checkbox",{staticClass:"m-2",attrs:{id:"checkbox-1",name:"checkbox-1",value:"public_write","unchecked-value":"private_write",checked:""},model:{value:e.privacy,callback:function(t){e.privacy=t},expression:"privacy"}},[e._v(" Anyone can amend this file ")]),o("b-button",{attrs:{size:"sm",variant:"warning"},on:{click:e.clear}},[e._v("Clear")]),o("b-button",{attrs:{size:"sm",variant:"success"},on:{click:e.copy}},[e._v("Copy")]),o("b-button",{attrs:{size:"sm",variant:"success"},on:{click:e.openCommand}},[e._v("Command")]),o("network",{ref:"network",staticClass:"wrapper",attrs:{nodes:e.nodes,edges:e.edges,options:e.options},on:{select:function(t){return e.networkEvent("select")},"select-node":function(t){return e.networkEvent("selectNode")},"select-edge":function(t){return e.networkEvent("selectEdge")}}}),o("NodeModal",{on:{ok:e.saveNode},model:{value:e.node,callback:function(t){e.node=t},expression:"node"}}),o("EdgeModal",{on:{ok:e.saveEdge},model:{value:e.edge,callback:function(t){e.edge=t},expression:"edge"}}),o("CommandModal",{on:{ok:e.saveCommand},model:{value:e.command,callback:function(t){e.command=t},expression:"command"}})],1)},r=[],a=(o("4de4"),o("4160"),o("c975"),o("a15b"),o("d81d"),o("a434"),o("b0c0"),o("d3b7"),o("ac1f"),o("8a79"),o("1276"),o("159b"),o("96cf"),o("1da1")),i=(o("38b4"),o("4d8d")),s=o("6dc1"),l=o("93ef"),c=o("234f"),d=o("1404"),u=o("fd2a"),f=(o("fb6a"),o("3ca3"),o("5319"),o("2ca0"),o("498a"),o("ddb0"),o("2b3d"),{data:function(){return{commandHistory:[]}},methods:{getInputType:function(e){var t={};if(this.isValidUrl(e))t.type="url",t.value=e,t.isFile=this.isFile(e);else{var o=e.charAt(0),n="";switch(o){case"/":t.type="commande",t.value=e,t.inputNew="",this.catchCommande(t);break;case".":n=this.commandHistory[this.commandHistory.length-1],t.inputNew=n.s+" "+n.p+" "+n.o;break;case";":n=this.commandHistory[this.commandHistory.length-1],t.inputNew=n.s+" "+n.p+" ";break;case",":n=this.commandHistory[this.commandHistory.length-1],t.inputNew=n.s+" ";break;default:t=this.traiteTriplet(e),console.log("TODO is catchTriplet Necessaire ici ?")}}return t},traiteTriplet:function(e){var t={},o="",n=e.slice(-1),r=e.slice(0,-1).split(" "),a=!0,i="",s=[];switch(r.forEach((function(e){e=e.trim(),e.startsWith('"')?(i="debut",s.push(e.substr(1))):e.endsWith('"')?(i="fin",s.push(s.pop()+" "+e.slice(0,-1))):"debut"==i?s.push(s.pop()+" "+e):s.push(e)})),s.length>0&&(r=s),n){case".":o="";break;case";":o=r[0].indexOf(" ")>-1?'"'+r[0]+'" ':r[0]+" ";break;case",":o=r[0].indexOf(" ")>-1?'"'+r[0]+'" ':r[0]+" ",r[1].indexOf(" ")>-1?o+='"'+r[1]+'" ':o+=r[1]+" ";break;case"-":o=r[2].indexOf(" ")>-1?'"'+r[2]+'" ':r[2]+" ";break;default:console.log("message to chat "+e),o="",a=!1}if(a){t.type="triplet";var l={};l.subject=r[0],l.predicate=r[1],l.object=r[2],t.value=l,t.inputNew=o}else t.type="message",t.value=e,t.inputNew=o;return t},catchTriplet:function(e){var t=e.value.subject,o=e.value.predicate,n=e.value.object,r=this.network.body.data.nodes.get({filter:function(e){return e.label==t}}),a=this.network.body.data.nodes.get({filter:function(e){return e.label==n}});if(0==r.length){var i={label:t,color:{border:document.getElementById("bordercolorpicker").value,background:document.getElementById("bodycolorpicker").value}};this.network.body.data.nodes.add(i)}if(0==a.length){var s={label:n,color:{border:document.getElementById("bordercolorpicker").value,background:document.getElementById("bodycolorpicker").value}};this.network.body.data.nodes.add(s)}r=this.network.body.data.nodes.get({filter:function(e){return e.label==t}}),a=this.network.body.data.nodes.get({filter:function(e){return e.label==n}}),this.network.body.data.edges.add({label:o,from:r[0].id,to:a[0].id,color:{inherit:"both"}});var l=this.network.body.data.edges.get({filter:function(e){return e.from==r[0].id&&e.to==a[0].id&&e.label==o}});console.log("EDGE is necessaire ici ?",l)},catchCommande:function(e){switch(console.log(e),e.value){case"/h":case"/help":case"/aide":console.log("help");break;case"/e":case"/export":case"/exportJson":console.log("exportjson");break;case"/t":console.log("exportTtl");break;case"/i":case"/import":case"/importJson":console.log("import"),document.getElementById("import-popUp").style.display="block";break;case"/p":console.log("save_to_pod"),document.getElementById("select-pod-popUp").style.display="block";break;case"/a":console.log("open editor"),document.getElementById("editeur-popUp").style.display="block";break;case"/r":console.log("reglages editor");break;case"/n":console.log("new graph"),this.clear();break;case"/l":console.log("connection a la base levelgraph");break;case"/c":this.downloadCanvas();break;default:console.log("non traite"+e)}},exportTtl:function(e){var t=e.body.data.nodes.get({filter:function(e){return 1!=e.cid}}),o=e.body.data.edges.get({filter:function(e){return 1!=e.cid}});console.log("exportation"),console.log(t),console.log(o);for(var n=new Array,r=new Array,a=0;a<o.length;a++){var i=o[a],s=i.from,l=i.label.replace(/\s/g,"_"),c=i.to;console.log(c);var d=e.body.data.nodes.get(s).label.replace(/\n/g,"");try{var u=e.body.data.nodes.get(c).label.replace(/\n/g,"")}catch(y){console.error("ERREUR NONTRAITEE"),console.error(y)}var f=this.validRdf(e,s),p=this.validRdf(e,l),h=this.validRdf(e,c);-1==f.indexOf(":")&&(f="_:"+f),-1==p.indexOf(":")&&(p=":"+p),-1==h.indexOf(":")&&(h="_:"+h);var b=["owl:AnnotationProperty","owl:ObjectProperty","owl:DatatypeProperty"],g=1;"type"==p||":type"==p||"rdf:type"==p||":a"==p||":est_un"==p||":est_une"==p||":is_a"==p?(p="rdf:type",r.push(h+" rdf:type owl:Class . \n"),g=1):"subClassOf"==p||":subClassOf"==p||"rdfs:subClassOf"==p?p="rdfs:subClassOf":"sameAs"==p||":sameAs"==p?(p="owl:sameAs",g=-1):"ispartof"==p.toLowerCase()||"partof"==p.toLowerCase()||":partof"==p.toLowerCase()||":ispartof"==p.toLowerCase()?(p="smag:partOf",g=1):"comment"!=p.toLowerCase()&&"commentaire"!=p.toLowerCase()&&"//"!=p.toLowerCase()&&"#"!=p.toLowerCase()||(p="rdfs:comment",g=-1),g>=0&&r.push(p+" rdf:type "+b[g]+" . \n");var m=f+" "+p+" "+h+" . \n";m+=f+' rdfs:label "'+d+'" . \n',m+=h+' rdfs:label "'+u+'" . \n',n[a]=m,console.log(m),console.log("||||||||||||||||||||||--")}n=this.uniq_fast(n.sort()),r=this.uniq_fast(r.sort());for(var v=0;v<n.length;v++)n[v];for(var w=0;w<r.length;w++)r[w]},uniq_fast:function(e){for(var t={},o=[],n=e.length,r=0,a=0;a<n;a++){var i=e[a];1!==t[i]&&(t[i]=1,o[r++]=i)}return o},validRdf:function(e,t){console.log(e.body.data.nodes.get(t)),console.log("nettoyage "+t);var o={type:"uri"};return-1!==t.indexOf(" ")&&(o.type="literal"),t},downloadCanvas:function(){var e=document.getElementById("mynetwork").childNodes[0].canvas;console.log(e);var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var o=t.getContext("2d");o.fillStyle="#FFFFFF",o.fillRect(0,0,e.width,e.height),o.drawImage(e,0,0);var n=t.toDataURL(),r=document.createElement("a");r.download="image.png",r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r)},isFile:function(e){return e.split("/").pop().indexOf(".")>-1},isValidUrl:function(e){try{return new URL(e),!0}catch(t){return!1}},traiteInput:function(e){switch(console.log(e),e.type){case"commande":break;case"triplet":break;case"url":var t=e;t.source=e.value,console.log("IMPORTER, see spoggy-simple /js/import-export");break;default:}}}}),p={name:"EditorNetwork",components:{NodeModal:function(){return o.e("chunk-fad8e306").then(o.bind(null,"b7ab"))},EdgeModal:function(){return o.e("chunk-4e25104e").then(o.bind(null,"4e1d"))},CommandModal:function(){return o.e("chunk-1a7955d8").then(o.bind(null,"501d"))}},mixins:[c["a"],d["a"],u["a"],f],data:function(){var e=this;return{self:this,node:{label:"node_label"},edge:{},filename:"new_graph.ttl",privacy:"public_write",net:{},command:"",nodes:[{id:1,label:"circle",shape:"circle"},{id:2,label:"ellipse",shape:"ellipse"},{id:3,label:"database",shape:"database"},{id:4,label:"box",shape:"box"},{id:5,label:"diamond",shape:"diamond"},{id:6,label:"dot",shape:"dot"},{id:7,label:"square",shape:"square"},{id:8,label:"triangle",shape:"triangle"}],edges:[{from:1,to:2},{from:2,to:3},{from:2,to:4},{from:2,to:5},{from:5,to:6},{from:5,to:7},{from:6,to:8}],options:{edges:{arrows:"to",scaling:{label:!0},smooth:!0},interaction:{navigationButtons:!0,keyboard:!0},manipulation:{enabled:!0,initiallyActive:!0,addNode:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(o,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addNode(o,n);case 1:case"end":return t.stop()}}),t)})));function o(e,o){return t.apply(this,arguments)}return o}(),editNode:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(o,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.editNode(o,n);case 1:case"end":return t.stop()}}),t)})));function o(e,o){return t.apply(this,arguments)}return o}(),addEdge:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(o,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addEdge(o,n);case 1:case"end":return t.stop()}}),t)})));function o(e,o){return t.apply(this,arguments)}return o}(),editEdge:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(o,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.editEdge(o,n);case 1:case"end":return t.stop()}}),t)})));function o(e,o){return t.apply(this,arguments)}return o}()}}}},created:function(){this.folder=this.$store.state.solid.folder},methods:{saveCommand:function(e){console.log("COMMAND",e);var t=this.getInputType(e);console.log("inputObject",t),this.traiteInput(t)},addNode:function(e,t){null!=this.tmp_file&&(this.file=this.tmp_file),e.id=this.file.url+"#"+e.id,e.label="",this.editNode(e,t)},editNode:function(e,t){console.log("EDIT NODE",e,t),this.node=e,this.$bvModal.show("node-popup")},addEdge:function(e,t){if(console.log("add edge",e,t),this.edge=e,e.from==e.to){var o=confirm("Do you want to connect the node to itself?");if(1!=o)return void t(null)}this.editEdgeWithoutDrag(e,t)},editEdge:function(e,t){console.log("EDIT edge",e,t),this.editEdgeWithoutDrag(e,t)},editEdgeWithoutDrag:function(e,t){this.edge=e,this.$bvModal.show("edge-popup"),t()},saveNode:function(e){console.log("saveNode",e);var t=this.nodes.map((function(e){return e.id})).indexOf(e.id);t>-1?(this.nodes.splice(t,1),this.nodes[t].label=e.label):this.nodes.push(e)},saveEdge:function(e){var t=this.edges.map((function(e){return e.id})).indexOf(e.id);t>-1?this.edges[t].label=e.label:(this.edges.push(e),this.writeEdgeToFile(e))},writeEdgeToFile:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var n,r,a,l,c,d,u,f,p;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return null!=t.tmp_file&&(t.file=t.tmp_file),n=t.nodes.filter((function(t){return t.id==e.from})),r=t.nodes.filter((function(t){return t.id==e.to})),a=n[0].id.split("#")[1],l=r[0].id.split("#")[1],c=new Date,d=c.toISOString(),o.next=9,Object(i["b"])(t.file.url);case 9:u=o.sent,f=u.addSubject({identifier:a}),f.addString(s["e"].label,n[0].label),f.addString(s["a"].modified,d),f.addRef(s["b"].maker,t.webId),f.addRef(t.file.url+"#"+e.label,r[0].id),p=u.addSubject({identifier:l}),p.addString(s["e"].label,r[0].label),u.save();case 18:case"end":return o.stop()}}),o)})))()},networkEvent:function(e,t){console.log(e,t)},copy:function(){var e="https://scenaristeur.github.io/solid-vue-panes/?url="+this.file.url,t=this;console.log(e),navigator.clipboard.writeText(e).then((function(){t.makeToast("The url is in your clipboard ;-)",e+".               Use Ctrl+V to share it","success")}),(function(){console.log("clipERROR",e),t.makeToast("Houston, we've got a problem with the clipboard ;-(",e,"warning")}))},create:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o,n,r,a,c,d,u,f,p,h,b,g,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clear(),console.log(e.privacy),e.tmp_file={},e.filename=e.filename.split(" ").join("_"),e.tmp_file.name=e.filename.endsWith(".ttl")?e.filename:e.filename+".ttl",e.tmp_file.url=e.folder.url+e.tmp_file.name,e.thisNode={id:e.tmp_file.url+"#this",label:e.filename},e.nodes.push(e.thisNode),o={},n=!1,t.prev=10,t.next=13,Object(i["b"])(e.tmp_file.url);case 13:o=t.sent,n=!0,t.next=23;break;case 17:return t.prev=17,t.t0=t["catch"](10),t.next=21,Object(i["a"])(e.tmp_file.url);case 21:o=t.sent,n=!1;case 23:return r=new Date,a=r.toISOString(),c=o.addSubject({identifier:"this"}),0==n?(d=e.thisNode.label,c.addString(s["e"].label,d),c.addString(s["a"].created,a),c.addRef(s["d"].type,e.tmp_file.url+"#Network"),console.log("file created",e.tmp_file.url)):(c.addString(s["a"].modified,a),console.log("file modified",e.tmp_file.url)),c.addRef(s["b"].maker,e.webId),console.log("one"),t.next=31,o.save();case 31:if(u=t.sent,console.log("two",u),"public_write"!=e.privacy){t.next=60;break}return console.log(e.tmp_file.url),t.next=37,Object(l["h"])(e.tmp_file.url);case 37:if(f=t.sent,console.log(f),Object(l["p"])(f)){t.next=48;break}if(Object(l["n"])(f)){t.next=42;break}throw new Error("The current user does not have permission to change access rights to this Resource.");case 42:if(Object(l["o"])(f)){t.next=44;break}throw new Error("The current user does not have permission to see who currently has access to this Resource.");case 44:p=Object(l["a"])(f),console.log("create"),t.next=50;break;case 48:p=Object(l["f"])(f),console.log("get");case 50:return console.log("acl",p),h=Object(l["s"])(p,e.webId,{read:!0,append:!0,write:!0,control:!0}),t.next=54,Object(l["q"])(f,h);case 54:return b=t.sent,g=Object(l["u"])(p,{read:!0,append:!0,write:!1,control:!1}),t.next=58,Object(l["q"])(f,g);case 58:m=t.sent,console.log(b,m);case 60:e.createActivity();case 61:case"end":return t.stop()}}),t,null,[[10,17]])})))()},createActivity:function(){console.log("createActivity"),this.net.displayType="Network",this.net.types=["Task","http://www.w3.org/ns/ldp#Resource"],this.net.path=this.tmp_file.url,console.log(this.net),this.activity={actor:{name:this.$store.state.solid.webId},type:"Create",summary:"",object:{name:this.thisNode.label,url:this.tmp_file.url,type:"Network"}},this.sendActivity()},clear:function(){this.nodes=[],this.edges=[]},openCommand:function(){this.$bvModal.show("command-popup")},update:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.triples=[],console.log(e.file.url),void 0==e.file.url||!e.file.url.endsWith(".ttl")&&!e.file.url.endsWith("card")){t.next=11;break}return t.next=5,Object(i["b"])(e.file.url);case 5:o=t.sent,console.log("fileDoc",o),e.triples=o.getTriples(),console.log(e.triples),t.next=12;break;case 11:console.log("TODO",e.file.url);case 12:e.triples.length>0&&e.triples.forEach((function(t){console.log("trip",t),e.addTriplet(t)}));case 13:case"end":return t.stop()}}),t)})))()},addTriplet:function(e){var t=this.colorize(e.subject.id),o=this.lastPart(e.subject.id),n={id:e.subject.id,label:o,shape:"star",color:"rgba("+t.red+", "+t.green+", "+t.blue+",0.5)"};n=this.addOrNothingNode(n);var r=this.colorize(e.object.id),a=this.lastPart(e.object.id),i={id:e.object.id,label:a,shape:"box",color:"rgba("+r.red+", "+r.green+", "+r.blue+",0.5)"};this.addOrNothingNode(i);var s=this.lastPart(e.predicate.id),l={from:n.id,to:i.id,label:s};this.edges.push(l)}},watch:{file:function(){console.log(this.file),this.update()}},computed:{folder:{get:function(){return this.$store.state.solid.folder},set:function(){}},profile_url:{get:function(){return this.$store.state.solid.storage+"public/popock/profile.ttl"},set:function(){}},storage:{get:function(){return this.$store.state.solid.storage},set:function(){}},webId:{get:function(){return this.$store.state.solid.webId},set:function(){}},friends:{get:function(){return this.$store.state.solid.friends},set:function(){}},file:{get:function(){return this.$store.state.solid.file},set:function(e){return this.$store.commit("solid/setFile",e)}}}},h=p,b=(o("60b0"),o("2877")),g=Object(b["a"])(h,n,r,!1,null,null,null);t["default"]=g.exports},c976:function(e,t,o){},d81d:function(e,t,o){"use strict";var n=o("23e7"),r=o("b727").map,a=o("1dde"),i=o("ae40"),s=a("map"),l=i("map");n({target:"Array",proto:!0,forced:!s||!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-26aa14ae.d18ad2eb.js.map