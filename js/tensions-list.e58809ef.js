(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tensions-list"],{1404:function(t,e,i){"use strict";i("a15b"),i("fb6a"),i("b0c0"),i("96cf");var a=i("1da1"),n=i("4d8d"),r=i("6dc1");e["a"]={created:function(){this.webId=this.$store.state.solid.webId,console.log("ActivityMixin WEBID CREATED",this.webId),this.config(this.webId);var t=new Date;this.date=this.formatDate(t),console.log(this.as),console.log(this.date)},methods:{sendActivity:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,a,o,c,s,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.activity),i=new Date,a="Activity_"+i.getTime(),o=i.toISOString(),c=t.formatDate(i),console.log(t.activity.actor.name,t.activity.type,t.activity.summary,c),s=t.pubPod+c+".ttl",l={},e.prev=8,e.next=11,Object(n["b"])(s);case 11:l=e.sent,e.next=19;break;case 14:return e.prev=14,e.t0=e["catch"](8),e.next=18,Object(n["a"])(s);case 18:l=e.sent;case 19:return console.log("webId",t.webId),t.activity.summary.length<1&&(t.activity.summary=[t.activity.actor.name,t.activity.type,"a",t.activity.object.type,"with name",t.activity.object.name].join(" ")),u=l.addSubject({identifier:a}),u.addLiteral(r["e"].label,t.activity.object.name),u.addLiteral(r["a"].created,o),u.addRef(r["b"].maker,t.webId),u.addRef("https://www.w3.org/ns/activitystreams#actor",t.webId),u.addRef(r["d"].type,"https://www.w3.org/ns/activitystreams#"+t.activity.type),u.addLiteral("https://www.w3.org/ns/activitystreams#summary",t.activity.summary),u.addRef("https://www.w3.org/ns/activitystreams#object",t.activity.object.url),e.next=31,l.save();case 31:case"end":return e.stop()}}),e,null,[[8,14]])})))()},send:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,a,o,c,s,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.activity),console.log(t.activity.actor.name,t.activity.type,t.activity.summary,t.date),i=t.pubPod+t.date+".ttl",a=new Date,o="Activity_"+a.getTime(),c=a.toISOString(),s={},e.prev=7,e.next=10,Object(n["b"])(i);case 10:s=e.sent,e.next=18;break;case 13:return e.prev=13,e.t0=e["catch"](7),e.next=17,Object(n["a"])(i);case 17:s=e.sent;case 18:return console.log("webId",t.webId),l=[t.activity.actor.name,t.activity.type,"a",t.activity.object.type,"with name",t.activity.object.name].join(" "),console.log("Musr create outbox object first, then activity !",s,o,c),u=s.addSubject({identifier:o}),u.addLiteral(r["e"].label,l),u.addLiteral(r["a"].created,c),u.addRef(r["b"].maker,t.webId),u.addRef("https://www.w3.org/ns/activitystreams#actor",t.webId),u.addRef(r["d"].type,"https://www.w3.org/ns/activitystreams#"+t.activity.type),u.addLiteral("https://www.w3.org/ns/activitystreams#summary",t.activity.summary),u.addRef("https://www.w3.org/ns/activitystreams#object",t.activity.object.url),e.next=31,s.save();case 31:case"end":return e.stop()}}),e,null,[[7,13]])})))()},formatDate:function(t){return[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-")},postActivity:function(){},config:function(t){this.config={},this.config.webId=t,console.log("ActivityMixin config",this.config)}},webId:{webId:function(t){this.config(t)}},computed:{webId:{get:function(){return this.$store.state.solid.webId},set:function(){}},activities:{get:function(){return this.$store.state.agora.activities},set:function(){}}},data:function(){return{as:{core:["Object","Link","Activity","IntransitiveActivity","Collection","OrderedCollection","CollectionPage","OrderedCollectionPage"],activity:["Accept","Add","Announce","Arrive","Block","Create","Delete","Dislike","Flag","Follow","Ignore","Invite","Join","Leave","Like","Listen","Move","Offer","Question","Reject","Read","Remove","TentativeReject","TentativeAccept","Travel","Undo","Update","View"],actor:["Application","Group","Organization","Person","Service"],object:["Article","Audio","Document","Event","Image","Note","Page","Place","Profile","Relationship","Tombstone","Video","Mention"]},pubPod:"https://agora.solid.community/public/popock/inbox/"}}}},"18cc":function(t,e,i){"use strict";i("96cf");var a=i("1da1"),n=i("86bb"),r=(i("4160"),i("ac1f"),i("5319"),i("1276"),i("498a"),i("159b"),i("1404")),o=i("4d8d"),c=i("6dc1"),s=i("00e8"),l=i.n(s),u={mixins:[n["a"],r["a"]],data:function(){return{}},created:function(){this.fc=new SolidFileClient(l.a),console.log(this.fc)},methods:{createFile:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var a,n,r,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.label=t.label.trim(),t.ttl_name=t.label.replace(/\s/g,"_"),e.activity={actor:{name:e.$store.state.solid.webId},type:"Create",summary:"",object:{name:t.label,url:"",type:"Tension"}},i.prev=3,a={},void 0!=t.url){i.next=13;break}return t.url=t.path+t.ttl_name+".ttl",i.next=9,Object(o["a"])(t.url);case 9:a=i.sent,e.activity.type="Create",i.next=17;break;case 13:return i.next=15,Object(o["b"])(t.url);case 15:a=i.sent,e.activity.type="Update";case 17:return n=a.addSubject({identifier:"this"}),r=new Date,s=r.toISOString(),void 0!=t.created?(t.modified=s,n.addLiteral(c["a"].modified,s),n.removeAll(c["e"].label),n.removeAll(c["c"].inbox),n.removeAll("https://holacratie.solid.community/public/holacratie#whatis",t.wi),n.removeAll("https://holacratie.solid.community/public/holacratie#whatshouldbe",t.wsb),n.removeAll(c["d"].type),n.removeAll("http://www.w3.org/ns/org#memberOf"),n.removeAll("http://www.w3.org/ns/org#purpose")):(t.created=s,n.addLiteral(c["a"].created,s)),console.log(t),n.addLiteral(c["e"].label,t.label),n.addRef(c["c"].inbox,"./"+t.ttl_name+"/inbox/"),n.addLiteral("https://holacratie.solid.community/public/holacratie#whatis",t.wi),n.addLiteral("https://holacratie.solid.community/public/holacratie#whatshouldbe",t.wsb),n.addRef(c["b"].maker,e.$store.state.solid.webId),t.types.forEach((function(t){n.addRef(c["d"].type,t)})),void 0!=t.roles&&(t.roles.split(",").forEach((function(t){n.addLiteral("http://www.w3.org/ns/org#memberOf",t.trim())})),console.log("TODO: must look at existing groups & existing frineds groups & activity published groups")),void 0!=t.domains&&(t.domains.split(",").forEach((function(t){n.addLiteral("http://www.w3.org/ns/org#purpose",t.trim())})),console.log("TODO: must look at https://www.wikidata.org/w/api.php?action=wbsearchentities&language=fr&format=json&search=Ecology")),i.next=32,a.save();case 32:e.makeToast("Created "+t.label,"ok","success"),i.next=39;break;case 35:i.prev=35,i.t0=i["catch"](3),e.makeToast("Error creating "+t.label,i.t0,"danger"),console.log(i.t0);case 39:"public"==t.privacy&&(console.log("ACTIVITY !!"),e.activity.object.url=t.url,e.sendActivity(),e.makeToast("TODO : must Activity publish",t.label,"success"));case 40:case"end":return i.stop()}}),i,null,[[3,35]])})))()},getFolder:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log("get folder",t),i.next=3,e.fc.readFolder(t);case 3:return a=i.sent,i.abrupt("return",a);case 5:case"end":return i.stop()}}),i)})))()}}};e["a"]={mixins:[n["a"],u],data:function(){return{tension:{privacy:"public"}}},methods:{createTension:function(){this.tension.displayType="Tension",this.tension.types=["http://purl.org/vocab/lifecycle/schema#Task","http://www.w3.org/ns/ldp#Resource"],this.tension.path=this.path,console.log(this.tension,this.path),this.createFile(this.tension),this.tension={privacy:"public"}},getTensions:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("GET TENSIONS",t.path),e.next=3,t.getFolder(t.path);case 3:return i=e.sent,console.log(i),e.abrupt("return",i.files);case 6:case"end":return e.stop()}}),e)})))()},getTensionDetail:function(t){return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["b"])(t.url);case 2:return i=e.sent,a=i.getSubject(t.url+"#this"),n=t,n.created=a.getLiteral(c["a"].created),n.label=a.getLiteral(c["e"].label),n.inbox=a.getRef(c["c"].inbox),n.wi=a.getLiteral("https://holacratie.solid.community/public/holacratie#whatis"),n.wsb=a.getLiteral("https://holacratie.solid.community/public/holacratie#whatshouldbe"),n.maker=a.getRef(c["b"].maker),n.types=a.getAllRefs(c["d"].type),n.roles=a.getAllLiterals("http://www.w3.org/ns/org#memberOf"),n.domains=a.getAllLiterals("http://www.w3.org/ns/org#purpose"),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})))()}}}},5319:function(t,e,i){"use strict";var a=i("d784"),n=i("825a"),r=i("7b0b"),o=i("50c4"),c=i("a691"),s=i("1d80"),l=i("8aa5"),u=i("14c3"),d=Math.max,h=Math.min,p=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,b=function(t){return void 0===t?t:String(t)};a("replace",2,(function(t,e,i,a){var m=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,w=a.REPLACE_KEEPS_$0,f=m?"$":"$0";return[function(i,a){var n=s(this),r=void 0==i?void 0:i[t];return void 0!==r?r.call(i,n,a):e.call(String(n),i,a)},function(t,a){if(!m&&w||"string"===typeof a&&-1===a.indexOf(f)){var r=i(e,t,this,a);if(r.done)return r.value}var s=n(t),p=String(this),v="function"===typeof a;v||(a=String(a));var g=s.global;if(g){var x=s.unicode;s.lastIndex=0}var j=[];while(1){var k=u(s,p);if(null===k)break;if(j.push(k),!g)break;var R=String(k[0]);""===R&&(s.lastIndex=l(p,o(s.lastIndex),x))}for(var I="",A=0,O=0;O<j.length;O++){k=j[O];for(var T=String(k[0]),L=d(h(c(k.index),p.length),0),S=[],E=1;E<k.length;E++)S.push(b(k[E]));var D=k.groups;if(v){var $=[T].concat(S,L,p);void 0!==D&&$.push(D);var _=String(a.apply(void 0,$))}else _=y(T,p,L,S,D,a);L>=A&&(I+=p.slice(A,L)+_,A=L+T.length)}return I+p.slice(A)}];function y(t,i,a,n,o,c){var s=a+t.length,l=n.length,u=g;return void 0!==o&&(o=r(o),u=v),e.call(c,u,(function(e,r){var c;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return i.slice(0,a);case"'":return i.slice(s);case"<":c=o[r.slice(1,-1)];break;default:var u=+r;if(0===u)return e;if(u>l){var d=p(u/10);return 0===d?e:d<=l?void 0===n[d-1]?r.charAt(1):n[d-1]+r.charAt(1):e}c=n[u-1]}return void 0===c?"":c}))}}))},"86bb":function(t,e,i){"use strict";e["a"]={methods:{makeToast:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(e,{title:t,variant:i,solid:!0})}}}},c6e4:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modele-view container"},[i("b-list-group",t._l(t.tensions,(function(t){return i("b-list-group-item",{key:t.url},[i("TensionItem",{attrs:{tension:t}})],1)})),1),t._v(" path : "+t._s(t.path)+" ")],1)},n=[],r=(i("d3b7"),i("96cf"),i("1da1")),o=i("18cc"),c={name:"TensionsList",mixins:[o["a"]],components:{TensionItem:function(){return i.e("chunk-2d0ab878").then(i.bind(null,"1652"))}},data:function(){return{path:"",tensions:[]}},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.path=t.config.workspace+"tensions/",e.next=3,t.getTensions();case 3:t.tensions=e.sent,console.log(t.tensions);case 5:case"end":return e.stop()}}),e)})))()},methods:{},computed:{config:{get:function(){return this.$store.state.gouvernance.config},set:function(){}}}},s=c,l=i("2877"),u=Object(l["a"])(s,a,n,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=tensions-list.e58809ef.js.map