(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5698729b"],{1276:function(t,e,n){"use strict";var i=n("d784"),r=n("44e7"),a=n("825a"),s=n("1d80"),o=n("4840"),l=n("8aa5"),c=n("50c4"),u=n("14c3"),d=n("9263"),h=n("d039"),f=[].push,g=Math.min,p=4294967295,v=!h((function(){return!RegExp(p,"y")}));i("split",2,(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=String(s(this)),a=void 0===n?p:n>>>0;if(0===a)return[];if(void 0===t)return[i];if(!r(t))return e.call(i,t,a);var o,l,c,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,v=new RegExp(t.source,h+"g");while(o=d.call(v,i)){if(l=v.lastIndex,l>g&&(u.push(i.slice(g,o.index)),o.length>1&&o.index<i.length&&f.apply(u,o.slice(1)),c=o[0].length,g=l,u.length>=a))break;v.lastIndex===o.index&&v.lastIndex++}return g===i.length?!c&&v.test("")||u.push(""):u.push(i.slice(g)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var r=s(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,r,n):i.call(String(r),e,n)},function(t,r){var s=n(i,t,this,r,i!==e);if(s.done)return s.value;var d=a(t),h=String(this),f=o(d,RegExp),m=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),x=new f(v?d:"^(?:"+d.source+")",b),y=void 0===r?p:r>>>0;if(0===y)return[];if(0===h.length)return null===u(x,h)?[h]:[];var w=0,E=0,S=[];while(E<h.length){x.lastIndex=v?E:0;var R,T=u(x,v?h:h.slice(E));if(null===T||(R=g(c(x.lastIndex+(v?0:E)),h.length))===w)E=l(h,E,m);else{if(S.push(h.slice(w,E)),S.length===y)return S;for(var _=1;_<=T.length-1;_++)if(S.push(T[_]),S.length===y)return S;E=w=R}}return S.push(h.slice(w)),S}]}),!v)},"14c3":function(t,e,n){var i=n("c6b6"),r=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var a=n.call(t,e);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},2532:function(t,e,n){"use strict";var i=n("23e7"),r=n("5a34"),a=n("1d80"),s=n("ab13");i({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(a(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},3083:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"solid-chat-list"},[n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"container",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"300"}},[n("b-list-group",{attrs:{flush:""}},t._l(t.data,(function(e){return n("b-list-group-item",{key:e.id},[n("div",{staticClass:"item"},[n("div",{staticClass:"avatar"}),n("div",{staticClass:"maker text-info"},[t._v(" "+t._s(e.maker.split("/").slice(2,3)[0])+" ")]),n("div",{staticClass:"content"},[t._v(" "+t._s(e.content)+" ")]),n("div",{staticClass:"created"},[t._v(" "+t._s(e.created)+" ")])])])})),1)],1),n("b-alert",{staticClass:"position-fixed fixed-bottom rounded-0",staticStyle:{"z-index":"2000",bottom:"30px"},attrs:{variant:"info",dismissible:""},model:{value:t.busy,callback:function(e){t.busy=e},expression:"busy"}},[t._v(t._s(t.title)+" ")]),n("SolidChatSend")],1)},r=[],a=(n("99af"),n("4de4"),n("caad"),n("c975"),n("a15b"),n("baa5"),n("d81d"),n("fb6a"),n("d3b7"),n("ac1f"),n("8a79"),n("2532"),n("1276"),n("b85c")),s=(n("96cf"),n("1da1")),o=n("487a"),l=n.n(o),c=n("4d8d"),u=n("6dc1"),d={name:"SolidChatList",directives:{infiniteScroll:l.a},props:{channel:Object},components:{SolidChatSend:function(){return n.e("chunk-7056219e").then(n.bind(null,"f345"))}},data:function(){return{data:[],busy:!0,title:"Select a channel"}},methods:{loadMore:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.busy=!0,!(this.limite<=this.date)){t.next=9;break}return e=[this.root,this.date.getFullYear(),("0"+(this.date.getMonth()+1)).slice(-2),("0"+this.date.getDate()).slice(-2),"chat.ttl"].join("/"),this.date.setDate(this.date.getDate()-1),this.title="loading "+this.date.toLocaleDateString(),t.next=7,this.loadMessages(e,"bottom");case 7:t.next=12;break;case 9:console.log("STOP"),this.data.push({id:Math.random(),maker:"https://System.solid-vue-panes",content:"This is the end, my friend, there are no message before that date",created:this.limite.toLocaleString()}),this.makeToast("No message before",this.limite.toLocaleString(),"warning");case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadMessages:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,s,o,l,d,h,f,g,p,v,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log("load",t),i.prev=1,i.next=4,Object(c["b"])(t);case 4:r=i.sent,s=r.findSubjects(),s=s.filter(n.onlyUnique),o=[],l=n.data.map((function(t){return t.id})),d=Object(a["a"])(s);try{for(d.s();!(h=d.n()).done;)f=h.value,f.asRef()==n.root+"/index.ttl#this"||l.includes(f.asRef())||(g=f.getString(u["a"].created),p=f.getLiteral(u["g"].content),v=f.getNodeRef(u["b"].maker)||"anonymous",m={id:f.asRef(),created:new Date(g).toLocaleString(),content:p,maker:v},o.unshift(m))}catch(b){d.e(b)}finally{d.f()}console.log("m",o),"top"==e?(n.today_messages=[],n.today_messages=o,console.log("TODAY",n.today_messages)):(n.old_messages.push.apply(n.old_messages,o),console.log("OLD",n.old_messages)),n.data=[],n.data=n.today_messages.concat(n.old_messages),i.next=19;break;case 17:i.prev=17,i.t0=i["catch"](1);case 19:n.busy=!1,console.log("loaded");case 21:case"end":return i.stop()}}),i,null,[[1,17]])})))()},loadMore1:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.busy=!0,console.log(this.busy,this.limite,this.date),!(this.limite<=this.date)){t.next=12;break}return console.log("yes"),e=[this.root,this.date.getFullYear(),("0"+(this.date.getMonth()+1)).slice(-2),("0"+this.date.getDate()).slice(-2),"chat.ttl"].join("/"),this.date.setDate(this.date.getDate()-1),this.title="loading "+this.date.toLocaleDateString(),t.next=9,this.updateMessages(e,"bottom");case 9:this.busy=!1,t.next=13;break;case 12:console.log("no");case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initChat:function(t){console.log("init : ",t),this.today_messages=[],this.old_messages=[],this.messages=[],this.data=[],this.stopped=!1,this.date=new Date,console.log(this.date),this.root=t,this.root.endsWith("/")&&(this.root=this.root.slice(0,-1)),this.fileUrl=[this.root,this.date.getFullYear(),("0"+(this.date.getMonth()+1)).slice(-2),("0"+this.date.getDate()).slice(-2),"chat.ttl"].join("/"),console.log(this.fileUrl),this.$store.commit("chat/setFileUrl",this.fileUrl),this.$store.commit("chat/setRoot",this.root);var e=this.root.split("//")[1],n=e.split("/")[0]+"/",i=new WebSocket("wss://"+n,["solid.0.1.0"]);i.onopen=function(){i.send("sub "+this.fileUrl)}.bind(this),i.onmessage=function(t){t.data&&"pub"===t.data.slice(0,3)&&this.updateMessages(t.data.substring(4),"top")}.bind(this),this.loadMore()},updateMessages:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,s,o,l,d,h,f,g,p,v,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(c["b"])(t);case 3:r=i.sent,s=r.findSubjects(),s=s.filter(n.onlyUnique),o=[],l=n.data.map((function(t){return t.id})),d=Object(a["a"])(s);try{for(d.s();!(h=d.n()).done;)f=h.value,f.asRef()==n.root+"/index.ttl#this"||l.includes(f.asRef())||(g=f.getString(u["a"].created),p=f.getLiteral(u["g"].content),v=f.getNodeRef(u["b"].maker)||"anonymous",m={id:f.asRef(),created:new Date(g).toLocaleString(),content:p,maker:v},o.unshift(m),console.log(o))}catch(b){d.e(b)}finally{d.f()}"top"==e?(n.today_messages=[],n.today_messages=o):n.old_messages.push.apply(n.old_messages,o),n.data=[],n.data=n.today_messages.concat(n.old_messages),n.busy=!1,console.log("DATA",n.data,n.busy),i.next=19;break;case 17:i.prev=17,i.t0=i["catch"](0);case 19:case"end":return i.stop()}}),i,null,[[0,17]])})))()},makeToast:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(e,{title:t,variant:n,solid:!0})},onlyUnique:function(t,e,n){return n.indexOf(t)===e}},watch:{channel:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),n=e.created,console.log(n),this.limite=new Date(n),console.log("LIMITE",this.limite),this.date=new Date,this.url=this.channel.instance.substr(0,this.channel.instance.lastIndexOf("/")+1),t.next=9,this.initChat(this.url);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},h=d,f=(n("b7d5"),n("2877")),g=Object(f["a"])(h,i,r,!1,null,null,null);e["default"]=g.exports},"44e7":function(t,e,n){var i=n("861d"),r=n("c6b6"),a=n("b622"),s=a("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},"487a":function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var n,i,r,a,s,o=function(){t.apply(a,s),i=n};return function(){if(a=this,s=arguments,n=Date.now(),r&&(clearTimeout(r),r=null),i){var t=e-(n-i);t<0?o():r=setTimeout((function(){o()}),t)}else o()}},n=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},i=document.defaultView.getComputedStyle,r=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var n=i(e).overflowY;if("scroll"===n||"auto"===n)return e;e=e.parentNode}return window},a=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},s=function(t){return t===window?n(window):t.getBoundingClientRect().top+n(window)},o=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},l=function(){if(!this.binded){this.binded=!0;var t=this,n=t.el,i=n.getAttribute("infinite-scroll-throttle-delay"),a=200;i&&(a=Number(t.vm[i]||i),(isNaN(a)||a<0)&&(a=200)),t.throttleDelay=a,t.scrollEventTarget=r(n),t.scrollListener=e(c.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var s=n.getAttribute("infinite-scroll-disabled"),o=!1;s&&(this.vm.$watch(s,(function(e){t.disabled=e,!e&&t.immediateCheck&&c.call(t)})),o=Boolean(t.vm[s])),t.disabled=o;var l=n.getAttribute("infinite-scroll-distance"),u=0;l&&(u=Number(t.vm[l]||l),isNaN(u)&&(u=0)),t.distance=u;var d=n.getAttribute("infinite-scroll-immediate-check"),h=!0;d&&(h=Boolean(t.vm[d])),t.immediateCheck=h,h&&c.call(t);var f=n.getAttribute("infinite-scroll-listen-for-event");f&&t.vm.$on(f,(function(){c.call(t)}))}},c=function(t){var e=this.scrollEventTarget,i=this.el,r=this.distance;if(!0===t||!this.disabled){var o=n(e),l=o+a(e),c=!1;if(e===i)c=e.scrollHeight-l<=r;else{var u=s(i)-s(e)+i.offsetHeight+o;c=l+r>=u}c&&this.expression&&this.expression()}},u={bind:function(e,n,i){e[t]={el:e,vm:i.context,expression:n.value};var r=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){o(e)&&l.call(e[t],r),e[t].bindTryCount=0;var n=function n(){e[t].bindTryCount>10||(e[t].bindTryCount++,o(e)?l.call(e[t],r):setTimeout(n,50))};n()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},d=function(t){t.directive("InfiniteScroll",u)};return window.Vue&&(window.infiniteScroll=u,Vue.use(d)),u.install=d,u}))},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"8a79":function(t,e,n){"use strict";var i=n("23e7"),r=n("06cf").f,a=n("50c4"),s=n("5a34"),o=n("1d80"),l=n("ab13"),c=n("c430"),u="".endsWith,d=Math.min,h=l("endsWith"),f=!c&&!h&&!!function(){var t=r(String.prototype,"endsWith");return t&&!t.writable}();i({target:"String",proto:!0,forced:!f&&!h},{endsWith:function(t){var e=String(o(this));s(t);var n=arguments.length>1?arguments[1]:void 0,i=a(e.length),r=void 0===n?i:d(a(n),i),l=String(t);return u?u.call(e,l,r):e.slice(r-l.length,r)===l}})},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},9263:function(t,e,n){"use strict";var i=n("ad6d"),r=n("9f7f"),a=RegExp.prototype.exec,s=String.prototype.replace,o=a,l=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=l||u||c;d&&(o=function(t){var e,n,r,o,d=this,h=c&&d.sticky,f=i.call(d),g=d.source,p=0,v=t;return h&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),v=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(g="(?: "+g+")",v=" "+v,p++),n=new RegExp("^(?:"+g+")",f)),u&&(n=new RegExp("^"+g+"$(?!\\s)",f)),l&&(e=d.lastIndex),r=a.call(h?n:d,v),h?r?(r.input=r.input.slice(p),r[0]=r[0].slice(p),r.index=d.lastIndex,d.lastIndex+=r[0].length):d.lastIndex=0:l&&r&&(d.lastIndex=d.global?r.index+r[0].length:e),u&&r&&r.length>1&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),t.exports=o},"9f7f":function(t,e,n){"use strict";var i=n("d039");function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a15b:function(t,e,n){"use strict";var i=n("23e7"),r=n("44ad"),a=n("fc6a"),s=n("a640"),o=[].join,l=r!=Object,c=s("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(t){return o.call(a(this),void 0===t?",":t)}})},ab13:function(t,e,n){var i=n("b622"),r=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(i){}}return!1}},ac1f:function(t,e,n){"use strict";var i=n("23e7"),r=n("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},b7d5:function(t,e,n){"use strict";var i=n("c8cb"),r=n.n(i);r.a},baa5:function(t,e,n){var i=n("23e7"),r=n("e58c");i({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},c8cb:function(t,e,n){},caad:function(t,e,n){"use strict";var i=n("23e7"),r=n("4d64").includes,a=n("44d2"),s=n("ae40"),o=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!o},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},d784:function(t,e,n){"use strict";n("ac1f");var i=n("6eeb"),r=n("d039"),a=n("b622"),s=n("9263"),o=n("9112"),l=a("species"),c=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=a("replace"),h=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,d){var g=a(t),p=!r((function(){var e={};return e[g]=function(){return 7},7!=""[t](e)})),v=p&&!r((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return e=!0,null},n[g](""),!e}));if(!p||!v||"replace"===t&&(!c||!u||h)||"split"===t&&!f){var m=/./[g],b=n(g,""[t],(function(t,e,n,i,r){return e.exec===s?p&&!r?{done:!0,value:m.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),x=b[0],y=b[1];i(String.prototype,t,x),i(RegExp.prototype,g,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}d&&o(RegExp.prototype[g],"sham",!0)}},d81d:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").map,a=n("1dde"),s=n("ae40"),o=a("map"),l=s("map");i({target:"Array",proto:!0,forced:!o||!l},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e58c:function(t,e,n){"use strict";var i=n("fc6a"),r=n("a691"),a=n("50c4"),s=n("a640"),o=n("ae40"),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=s("lastIndexOf"),h=o("indexOf",{ACCESSORS:!0,1:0}),f=u||!d||!h;t.exports=f?function(t){if(u)return c.apply(this,arguments)||0;var e=i(this),n=a(e.length),s=n-1;for(arguments.length>1&&(s=l(s,r(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:c}}]);
//# sourceMappingURL=chunk-5698729b.8c7eeb49.js.map